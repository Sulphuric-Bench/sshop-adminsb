(self.webpackChunksbsadmin=self.webpackChunksbsadmin||[]).push([[179],{255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=255,t.exports=e},693:(t,e,n)=>{"use strict";n.d(e,{AFp:()=>zs,ip1:()=>Gs,CZH:()=>Hs,hGG:()=>Va,z2F:()=>Ra,sBO:()=>ms,_Vd:()=>Bo,EJc:()=>Xs,SBq:()=>Ko,qLn:()=>sr,gxx:()=>Vi,OlP:()=>Qe,zs3:()=>Yi,ZZ4:()=>ls,aQg:()=>fs,soG:()=>Ys,h0i:()=>Ss,PXZ:()=>xa,R0b:()=>la,FiY:()=>pn,Lbi:()=>Qs,g9A:()=>Js,Qsj:()=>Jo,FYo:()=>Zo,JOm:()=>cr,Tiy:()=>Wo,q3G:()=>er,Rgc:()=>Es,dDg:()=>ma,q4F:()=>Yo,GfV:()=>$o,s_b:()=>Cs,ifc:()=>U,eFA:()=>ka,G48:()=>Aa,X6Q:()=>Sa,_c5:()=>Fa,VLi:()=>wa,c2e:()=>$s,zSh:()=>Ui,wAp:()=>Fo,vHH:()=>_,EiD:()=>Xn,mCW:()=>Fn,qzn:()=>Sn,JVY:()=>Cn,pB0:()=>Dn,eBb:()=>kn,L6k:()=>xn,LAX:()=>Nn,cg1:()=>Ro,Tjo:()=>La,kL8:()=>Po,yhl:()=>An,dqk:()=>z,sIi:()=>no,QGY:()=>fo,F4k:()=>po,RDi:()=>kt,AaK:()=>g,z3N:()=>In,TTD:()=>Tt,xp6:()=>Kr,ekj:()=>Eo,Xpm:()=>nt,lG2:()=>ct,Yz7:()=>S,cJS:()=>A,oAB:()=>st,Yjl:()=>lt,Y36:()=>so,qZA:()=>lo,TgZ:()=>co,EpF:()=>ho,LFG:()=>ln,$8M:()=>Ke,NdJ:()=>go,oxw:()=>bo,Q6J:()=>ao,CHM:()=>zt,kYT:()=>at,YNc:()=>oo,_uU:()=>Co,Oqu:()=>xo});var r=n(765),i=n(319),o=n(574),s=n(682),a=n(393);function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.w,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.w.EMPTY)),t}refCount(){return u()(this)}}const f=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.xQ}function y(t){for(let e in t)if(t[e]===y)return e;throw Error("Could not find renamed property on target object.")}function g(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(g).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function m(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const v=y({__forward_ref__:y});function b(t){return t.__forward_ref__=b,t.toString=function(){return g(this())},t}function w(t){return"function"==typeof(e=t)&&e.hasOwnProperty(v)&&e.__forward_ref__===b?t():t;var e}class _ extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function E(t){return"string"==typeof t?t:null==t?"":String(t)}function T(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():E(t)}function I(t,e){const n=e?` in ${e}`:"";throw new _("201",`No provider for ${T(t)} found${n}`)}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function A(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return x(t,N)||x(t,O)}function x(t,e){return t.hasOwnProperty(e)?t[e]:null}function k(t){return t&&(t.hasOwnProperty(D)||t.hasOwnProperty(R))?t[D]:null}const N=y({"\u0275prov":y}),D=y({"\u0275inj":y}),O=y({ngInjectableDef:y}),R=y({ngInjectorDef:y});var P=(()=>((P=P||{})[P.Default=0]="Default",P[P.Host=1]="Host",P[P.Self=2]="Self",P[P.SkipSelf=4]="SkipSelf",P[P.Optional=8]="Optional",P))();let L;function F(t){const e=L;return L=t,e}function M(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&P.Optional?null:void 0!==e?e:void I(g(t),"Injector")}function V(t){return{toString:t}.toString()}var j=(()=>((j=j||{})[j.OnPush=0]="OnPush",j[j.Default=1]="Default",j))(),U=(()=>((U=U||{})[U.Emulated=0]="Emulated",U[U.None=2]="None",U[U.ShadowDom=3]="ShadowDom",U))();const q="undefined"!=typeof globalThis&&globalThis,B="undefined"!=typeof window&&window,G="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,H="undefined"!=typeof global&&global,z=q||H||B||G,K={},Z=[],J=y({"\u0275cmp":y}),Q=y({"\u0275dir":y}),W=y({"\u0275pipe":y}),$=y({"\u0275mod":y}),Y=y({"\u0275loc":y}),X=y({"\u0275fac":y}),tt=y({__NG_ELEMENT_ID__:y});let et=0;function nt(t){return V(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===j.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||U.Emulated,id:"c",styles:t.styles||Z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=et++,n.inputs=ut(t.inputs,e),n.outputs=ut(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(rt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(it):null,n})}function rt(t){return ht(t)||function(t){return t[Q]||null}(t)}function it(t){return function(t){return t[W]||null}(t)}const ot={};function st(t){return V(()=>{const e={type:t.type,bootstrap:t.bootstrap||Z,declarations:t.declarations||Z,imports:t.imports||Z,exports:t.exports||Z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(ot[t.id]=t.type),e})}function at(t,e){return V(()=>{const n=ft(t,!0);n.declarations=e.declarations||Z,n.imports=e.imports||Z,n.exports=e.exports||Z})}function ut(t,e){if(null==t)return K;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ct=nt;function lt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ht(t){return t[J]||null}function ft(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${g(t)} does not have '\u0275mod' property.`);return n}const dt=20,pt=10;function yt(t){return Array.isArray(t)&&"object"==typeof t[1]}function gt(t){return Array.isArray(t)&&!0===t[1]}function mt(t){return 0!=(8&t.flags)}function vt(t){return 2==(2&t.flags)}function bt(t){return 1==(1&t.flags)}function wt(t){return null!==t.template}function _t(t,e){return t.hasOwnProperty(X)?t[X]:null}class Et{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Tt(){return It}function It(t){return t.type.prototype.ngOnChanges&&(t.setInput=At),St}function St(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===K)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function At(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:K,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Et(u&&u.currentValue,e,s===K),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}let xt;function kt(t){xt=t}function Nt(t){return!!t.listen}Tt.ngInherit=!0;const Dt={createRenderer:(t,e)=>void 0!==xt?xt:"undefined"!=typeof document?document:void 0};function Ot(t){for(;Array.isArray(t);)t=t[0];return t}function Rt(t,e){return Ot(e[t])}function Pt(t,e){return Ot(e[t.index])}function Lt(t,e){return t.data[e]}function Ft(t,e){const n=e[t];return yt(n)?n:n[0]}function Mt(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function jt(t){t[18]=0}function Ut(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:se(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function Gt(){return qt.lFrame.lView}function Ht(){return qt.lFrame.tView}function zt(t){return qt.lFrame.contextLView=t,t[8]}function Kt(){let t=Zt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Zt(){return qt.lFrame.currentTNode}function Jt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return qt.lFrame.isParent}function Wt(){return qt.isInCheckNoChangesMode}function $t(t){qt.isInCheckNoChangesMode=t}function Yt(){return qt.lFrame.bindingIndex++}function Xt(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,te(e)}function te(t){qt.lFrame.currentDirectiveIndex=t}function ee(t){qt.lFrame.currentQueryIndex=t}function ne(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function re(t,e,n){if(n&P.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&P.Host||(r=ne(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=oe();return r.currentTNode=e,r.lView=t,!0}function ie(t){const e=oe(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function oe(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?se(t):e}function se(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ue=ae;function ce(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function le(){return qt.lFrame.selectedIndex}function he(t){qt.lFrame.selectedIndex=t}function fe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function de(t,e,n){ge(t,e,3,n)}function pe(t,e,n,r){(3&t[2])===n&&ge(t,e,n,r)}function ye(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ge(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(me(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function me(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const ve=-1;class be{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function we(t,e,n){const r=Nt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ee(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function _e(t){return 3===t||4===t||6===t}function Ee(t){return 64===t.charCodeAt(0)}function Te(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ie(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ie(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Se(t){return t!==ve}function Ae(t){return 32767&t}function Ce(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let xe=!0;function ke(t){const e=xe;return xe=t,e}let Ne=0;function De(t,e){const n=Re(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Oe(r.data,t),Oe(e,null),Oe(r.blueprint,null));const i=Pe(t,e),o=t.injectorIndex;if(Se(i)){const t=Ae(i),n=Ce(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Oe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Re(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Pe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ve;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ve}function Le(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(tt)&&(r=n[tt]),null==r&&(r=n[tt]=Ne++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Fe(t,e,n){if(n&P.Optional)return t;I(e,"NodeInjector")}function Me(t,e,n,r){if(n&P.Optional&&void 0===r&&(r=null),0==(n&(P.Self|P.Host))){const i=t[9],o=F(void 0);try{return i?i.get(e,r,n&P.Optional):M(e,r,n&P.Optional)}finally{F(o)}}return Fe(r,e,n)}function Ve(t,e,n,r=P.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(tt)?t[tt]:void 0;return"number"==typeof e?e>=0?255&e:Ue:e}(n);if("function"==typeof o){if(!re(e,t,r))return r&P.Host?Fe(i,n,r):Me(e,n,r,i);try{const t=o(r);if(null!=t||r&P.Optional)return t;I(n)}finally{ue()}}else if("number"==typeof o){let i=null,s=Re(t,e),a=ve,u=r&P.Host?e[16][6]:null;for((-1===s||r&P.SkipSelf)&&(a=-1===s?Pe(t,e):e[s+8],a!==ve&&He(r,!1)?(i=e[1],s=Ae(a),e=Ce(a,e)):s=-1);-1!==s;){const t=e[1];if(Ge(o,s,t.data)){const t=qe(s,e,n,i,r,u);if(t!==je)return t}a=e[s+8],a!==ve&&He(r,e[1].data[s+8]===u)&&Ge(o,s,e)?(i=t,s=Ae(a),e=Ce(a,e)):s=-1}}}return Me(e,n,r,i)}const je={};function Ue(){return new ze(Kt(),Gt())}function qe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&wt(t)&&t.type===n)return u}return null}(a,s,n,null==r?vt(a)&&xe:r!=s&&0!=(3&a.type),i&P.Host&&o===a);return null!==u?Be(e,s,u,a):je}function Be(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof be){const s=i;s.resolving&&function(t,e){throw new _("200",`Circular dependency in DI detected for ${t}`)}(T(o[n]));const a=ke(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?F(s.injectImpl):null;re(t,r,P.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=It(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&F(u),ke(a),s.resolving=!1,ue()}}return i}function Ge(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function He(t,e){return!(t&P.Self||t&P.Host&&e)}class ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ve(this._tNode,this._lView,t,void 0,e)}}function Ke(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(_e(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const Ze="__parameters__";function Je(t,e,n){return V(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ze)?t[Ze]:Object.defineProperty(t,Ze,{value:[]})[Ze];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Qe{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=S({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}function We(t,e){t.forEach(t=>Array.isArray(t)?We(t,e):e(t))}function $e(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ye(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Xe(t,e,n){let r=en(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function tn(t,e){const n=en(t,e);if(n>=0)return t[1|n]}function en(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const nn={},rn=/\n/gm,on="__source",sn=y({provide:String,useValue:y});let an;function un(t){const e=an;return an=t,e}function cn(t,e=P.Default){if(void 0===an)throw new Error("inject() must be called from an injection context");return null===an?M(t,void 0,e):an.get(t,e&P.Optional?null:void 0,e)}function ln(t,e=P.Default){return(L||cn)(w(t),e)}function hn(t){const e=[];for(let n=0;n<t.length;n++){const r=w(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=P.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(ln(t,n))}else e.push(ln(r))}return e}function fn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const dn=fn(Je("Inject",t=>({token:t})),-1),pn=fn(Je("Optional"),8),yn=fn(Je("SkipSelf"),4);let gn;function mn(t){var e;return(null===(e=function(){if(void 0===gn&&(gn=null,z.trustedTypes))try{gn=z.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return gn}())||void 0===e?void 0:e.createHTML(t))||t}class vn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class bn extends vn{getTypeName(){return"HTML"}}class wn extends vn{getTypeName(){return"Style"}}class _n extends vn{getTypeName(){return"Script"}}class En extends vn{getTypeName(){return"URL"}}class Tn extends vn{getTypeName(){return"ResourceURL"}}function In(t){return t instanceof vn?t.changingThisBreaksApplicationSecurity:t}function Sn(t,e){const n=An(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function An(t){return t instanceof vn&&t.getTypeName()||null}function Cn(t){return new bn(t)}function xn(t){return new wn(t)}function kn(t){return new _n(t)}function Nn(t){return new En(t)}function Dn(t){return new Tn(t)}class On{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(mn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Rn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=mn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=mn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Pn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ln=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Fn(t){return(t=String(t)).match(Pn)||t.match(Ln)?t:"unsafe:"+t}function Mn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Vn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const jn=Mn("area,br,col,hr,img,wbr"),Un=Mn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qn=Mn("rp,rt"),Bn=Vn(qn,Un),Gn=Vn(jn,Vn(Un,Mn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vn(qn,Mn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bn),Hn=Mn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zn=Mn("srcset"),Kn=Vn(Hn,zn,Mn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Mn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zn=Mn("script,style,template");class Jn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Gn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Zn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Kn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Hn[o]&&(s=Fn(s)),zn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Fn(t.trim())).join(", ")),this.buf.push(" ",e,'="',$n(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Gn.hasOwnProperty(e)&&!jn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push($n(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Qn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wn=/([^\#-~ |!])/g;function $n(t){return t.replace(/&/g,"&amp;").replace(Qn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Wn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Yn;function Xn(t,e){let n=null;try{Yn=Yn||function(t){const e=new Rn(t);return function(){try{return!!(new window.DOMParser).parseFromString(mn(""),"text/html")}catch(t){return!1}}()?new On(e):e}(t);let r=e?String(e):"";n=Yn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Yn.getInertBodyElement(r)}while(r!==o);return mn((new Jn).sanitizeChildren(tr(n)||n))}finally{if(n){const t=tr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function tr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var er=(()=>((er=er||{})[er.NONE=0]="NONE",er[er.HTML=1]="HTML",er[er.STYLE=2]="STYLE",er[er.SCRIPT=3]="SCRIPT",er[er.URL=4]="URL",er[er.RESOURCE_URL=5]="RESOURCE_URL",er))();function nr(t,e){t.__ngContext__=e}function rr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ir(t){return t.ngOriginalError}function or(t,...e){t.error(...e)}class sr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||or}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(ir(t)):null}_findOriginalError(t){let e=ir(t);for(;e&&ir(e);)e=ir(e);return e}}const ar=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(z))();function ur(t){return t instanceof Function?t():t}var cr=(()=>((cr=cr||{})[cr.Important=1]="Important",cr[cr.DashCase=2]="DashCase",cr))();function lr(t,e){return(void 0)(t,e)}function hr(t){const e=t[3];return gt(e)?e[3]:e}function fr(t){return pr(t[13])}function dr(t){return pr(t[4])}function pr(t){for(;null!==t&&!gt(t);)t=t[4];return t}function yr(t,e,n,r,i){if(null!=r){let o,s=!1;gt(r)?o=r:yt(r)&&(s=!0,r=r[0]);const a=Ot(r);0===t&&null!==n?null==i?Er(e,n,a):_r(e,n,a,i||null,!0):1===t&&null!==n?_r(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Ir(t,e);r&&function(t,e,n,r){Nt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Ot(n)&&yr(e,t,r,o,i);for(let s=pt;s<n.length;s++){const i=n[s];Nr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function gr(t,e,n){return Nt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function mr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ut(i,-1)),n.splice(r,1)}function vr(t,e){if(t.length<=pt)return;const n=pt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&mr(o,r),e>0&&(t[n-1][4]=r[4]);const s=Ye(t,pt+e);Nr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function br(t,e){if(!(256&e[2])){const n=e[11];Nt(n)&&n.destroyNode&&Nr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return wr(t[1],t);for(;e;){let n=null;if(yt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)yt(e)&&wr(e[1],e),e=e[3];null===e&&(e=t),yt(e)&&wr(e[1],e),n=e&&e[4]}e=n}}(e)}}function wr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof be)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Ot(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Nt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&gt(e[3])){n!==e[3]&&mr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function _r(t,e,n,r,i){Nt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Er(t,e,n){Nt(t)?t.appendChild(e,n):e.appendChild(n)}function Tr(t,e,n,r,i){null!==r?_r(t,e,n,r,i):Er(t,e,n)}function Ir(t,e){return Nt(t)?t.parentNode(e):e.parentNode}function Sr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===U.None||e===U.Emulated)return null}return Pt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Pt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Tr(o,i,n[a],s,!1);else Tr(o,i,n,s,!1)}function Ar(t,e){if(null!==e){const n=e.type;if(3&n)return Pt(e,t);if(4&n)return xr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Ar(t,n);{const n=t[e.index];return gt(n)?xr(-1,n):Ot(n)}}if(32&n)return lr(e,t)()||Ot(t[e.index]);{const n=Cr(t,e);return null!==n?Array.isArray(n)?n[0]:Ar(hr(t[16]),n):Ar(t,e.next)}}return null}function Cr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function xr(t,e){const n=pt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Ar(t,r)}return e[7]}function kr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&nr(Ot(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)kr(t,e,n.child,r,i,o,!1),yr(e,t,i,a,o);else if(32&u){const s=lr(n,r);let u;for(;u=s();)yr(e,t,i,u,o);yr(e,t,i,a,o)}else 16&u?Dr(t,e,r,n,i,o):yr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Nr(t,e,n,r,i,o){kr(n,r,t.firstChild,e,i,o,!1)}function Dr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)yr(e,t,i,a[u],o);else kr(t,e,a,s[3],i,o,!0)}function Or(t,e,n){Nt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Rr(t,e,n){Nt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Pr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Lr="ng-template";function Fr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Pr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Mr(t){return 4===t.type&&t.value!==Lr}function Vr(t,e,n){return e===(4!==t.type||n?t.value:Lr)}function jr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(_e(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Vr(t,u,n)||""===u&&1===e.length){if(Ur(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Fr(t.attrs,c,n)){if(Ur(r))return!1;s=!0}continue}const l=qr(8&r?"class":u,i,Mr(t),n);if(-1===l){if(Ur(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Pr(e,c,0)||2&r&&c!==t){if(Ur(r))return!1;s=!0}}}}else{if(!s&&!Ur(r)&&!Ur(u))return!1;if(s&&Ur(u))continue;s=!1,r=u|1&r}}return Ur(r)||s}function Ur(t){return 0==(1&t)}function qr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Br(t,e,n=!1){for(let r=0;r<e.length;r++)if(jr(t,e[r],n))return!0;return!1}function Gr(t,e){return t?":not("+e.trim()+")":e}function Hr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Ur(s)||(e+=Gr(o,i),i=""),r=s,o=o||!Ur(r);n++}return""!==i&&(e+=Gr(o,i)),e}const zr={};function Kr(t){Zr(Ht(),Gt(),le()+t,Wt())}function Zr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&de(e,r,n)}else{const r=t.preOrderHooks;null!==r&&pe(e,r,0,n)}he(n)}function Jr(t,e){return t<<17|e<<2}function Qr(t){return t>>17&32767}function Wr(t){return 2|t}function $r(t){return(131068&t)>>2}function Yr(t,e){return-131069&t|e<<2}function Xr(t){return 1|t}function ti(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ee(i),n.contentQueries(2,e[o],o)}}}function ei(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,jt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ni(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Zt(),s=Qt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Jt(o,!0),o}function ri(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ii(t,e,n){ie(e);try{const r=t.viewQuery;null!==r&&Di(1,r,n);const i=t.template;null!==i&&ai(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ti(t,e),t.staticViewQueries&&Di(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ai(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ce()}}function oi(t,e,n,r){const i=e[2];if(256==(256&i))return;ie(e);const o=Wt();try{jt(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ai(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&de(e,n,null)}else{const n=t.preOrderHooks;null!==n&&pe(e,n,0,null),ye(e,0)}if(function(t){for(let e=fr(t);null!==e;e=dr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ut(r,1),n[2]|=1024}}}(e),function(t){for(let e=fr(t);null!==e;e=dr(e))for(let t=pt;t<e.length;t++){const n=e[t],r=n[1];Mt(n)&&oi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ti(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&de(e,n)}else{const n=t.contentHooks;null!==n&&pe(e,n,1),ye(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)he(~r);else{const i=r,o=n[++t],s=n[++t];Xt(o,i),s(2,e[i])}}}finally{he(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ii(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Di(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&de(e,n)}else{const n=t.viewHooks;null!==n&&pe(e,n,2),ye(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ut(e[3],-1))}finally{ce()}}function si(t,e,n,r){const i=e[10],o=!Wt(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&ii(t,e,r),oi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function ai(t,e,n,r,i){const o=le(),s=2&r;try{he(-1),s&&e.length>dt&&Zr(t,e,dt,Wt()),n(r,i)}finally{he(o)}}function ui(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||De(n,e),nr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=wt(r);o&&wi(e,n,r);const u=Be(e,t,a,n);nr(u,e),null!==s&&_i(0,a-i,u,r,0,s),o&&(Ft(n.index,e)[8]=u)}}(t,e,n,Pt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{he(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];te(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||yi(r,i)}}finally{he(-1),te(s)}}(t,e,n))}function ci(t,e,n=Pt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function li(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=hi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function hi(t,e,n,r,i,o,s,a,u,c){const l=dt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:zr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function fi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function di(t,e,n,r){let i=!1;if(Bt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Br(n,s.selectors,!1)&&(i||(i=[]),Le(De(n,e),t,s.type),wt(s)?(gi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,vi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=ri(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Te(n.mergedAttrs,c.hostAttrs),bi(t,n,e,u,c),mi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Mr(e)?null:Ei(n,i);o.push(c),s=fi(n,u,s),a=fi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new _("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Te(n.mergedAttrs,n.attrs),i}function pi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function yi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function gi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function mi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;wt(e)&&(n[""]=t)}}function vi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function bi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=_t(i.type)),s=new be(o,wt(i),null);t.blueprint[r]=s,n[r]=s,pi(t,e,0,r,ri(t,n,i.hostVars,zr),i)}function wi(t,e,n){const r=Pt(e,t),i=li(n),o=t[10],s=Ci(t,ei(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function _i(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ei(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ti(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ii(t,e){const n=Ft(e,t);if(Mt(n)){const t=n[1];80&n[2]?oi(t,n,t.template,n[8]):n[5]>0&&Si(n)}}function Si(t){for(let n=fr(t);null!==n;n=dr(n))for(let t=pt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];oi(t,e,t.template,e[8])}else e[5]>0&&Si(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ft(e[n],t);Mt(r)&&r[5]>0&&Si(r)}}function Ai(t,e){const n=Ft(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),ii(r,n,n[8])}function Ci(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function xi(t){for(;t;){t[2]|=64;const e=hr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ki(t,e,n){const r=e[10];r.begin&&r.begin();try{oi(t,e,t.template,n)}catch(i){throw Li(e,i),i}finally{r.end&&r.end()}}function Ni(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=rr(n),i=r[1];si(i,r,i.template,n)}}(t[8])}function Di(t,e,n){ee(0),e(t,n)}const Oi=(()=>Promise.resolve(null))();function Ri(t){return t[7]||(t[7]=[])}function Pi(t){return t.cleanup||(t.cleanup=[])}function Li(t,e){const n=t[9],r=n?n.get(sr,null):null;r&&r.handleError(e)}function Fi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Mi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=m(i,t):2==o&&(r=m(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Vi=new Qe("INJECTOR",-1);class ji{get(t,e=nn){if(e===nn){const e=new Error(`NullInjectorError: No provider for ${g(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ui=new Qe("Set Injector scope."),qi={},Bi={};let Gi;function Hi(){return void 0===Gi&&(Gi=new ji),Gi}function zi(t,e=null,n=null,r){return new Ki(t,n,e||Hi(),r)}class Ki{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&We(e,n=>this.processProvider(n,t,e)),We([t],t=>this.processInjectorType(t,[],i)),this.records.set(Vi,Ji(void 0,this));const o=this.records.get(Ui);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:g(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=nn,n=P.Default){this.assertNotDestroyed();const r=un(this),i=F(void 0);try{if(!(n&P.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(o=t)||"object"==typeof o&&o instanceof Qe)&&C(t);e=n&&this.injectableDefInScope(n)?Ji(Zi(t),qi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&P.Self?Hi():this.parent).get(t,e=n&P.Optional&&e===nn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(g(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[on]&&i.unshift(e[on]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=g(e);if(Array.isArray(e))i=e.map(g).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):g(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(rn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{F(i),un(r)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(g(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=w(t)))return!1;let r=k(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=k(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{We(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];We(r,t=>this.processProvider(t,n,r||Z))}}this.injectorDefTypes.add(o);const a=_t(o)||(()=>new o);this.records.set(o,Ji(a,qi));const u=r.providers;if(null!=u&&!s){const e=t;We(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Wi(t=w(t))?t:w(t&&t.provide);const i=function(t,e,n){return Qi(t)?Ji(void 0,t.useValue):Ji(function(t,e,n){let r;if(Wi(t)){const e=w(t);return _t(e)||Zi(e)}if(Qi(t))r=()=>w(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...hn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>ln(w(t.useExisting));else{const e=w(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return _t(e)||Zi(e);r=()=>new e(...hn(t.deps))}var i;return r}(t),qi)}(t);if(Wi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Ji(void 0,qi,!0),e.factory=()=>hn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===qi&&(e.value=Bi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=w(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Zi(t){const e=C(t),n=null!==e?e.factory:_t(t);if(null!==n)return n;if(t instanceof Qe)throw new Error(`Token ${g(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${g(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[N]||t[O]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Ji(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Qi(t){return null!==t&&"object"==typeof t&&sn in t}function Wi(t){return"function"==typeof t}const $i=function(t,e,n){return function(t,e=null,n=null,r){const i=zi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class Yi{static create(t,e){return Array.isArray(t)?$i(t,e,""):$i(t.providers,t.parent,t.name||"")}}function Xi(t,e){fe(rr(t)[1],Kt())}Yi.THROW_IF_NOT_FOUND=nn,Yi.NULL=new ji,Yi.\u0275prov=S({token:Yi,providedIn:"any",factory:()=>ln(Vi)}),Yi.__NG_ELEMENT_ID__=-1;let to=null;function eo(){if(!to){const t=z.Symbol;if(t&&t.iterator)to=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(to=n)}}}return to}function no(t){return!!ro(t)&&(Array.isArray(t)||!(t instanceof Map)&&eo()in t)}function ro(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function io(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function oo(t,e,n,r,i,o,s,a){const u=Gt(),c=Ht(),l=t+dt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ni(e,t,4,s||null,Vt(c,a));di(e,n,l,Vt(c,u)),fe(e,l);const h=l.tViews=hi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Jt(h,!1);const f=u[11].createComment("");Sr(c,u,f,h),nr(f,u),Ci(u,u[l]=Ti(f,u,f,h)),bt(h)&&ui(c,u,h),null!=s&&ci(u,h,a)}function so(t,e=P.Default){const n=Gt();return null===n?ln(t,e):Ve(Kt(),n,w(t),e)}function ao(t,e,n){const r=Gt();return io(r,Yt(),e)&&function(t,e,n,r,i,o,s,a){const u=Pt(e,n);let c,l=e.inputs;var h;null!=l&&(c=l[r])?(Fi(t,n,c,r,i),vt(e)&&function(t,e){const n=Ft(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Nt(o)?o.setProperty(u,r,i):Ee(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}(Ht(),function(){const t=qt.lFrame;return Lt(t.tView,t.selectedIndex)}(),r,t,e,r[11],n),ao}function uo(t,e,n,r,i){const o=i?"class":"style";Fi(t,n,e.inputs[o],o,r)}function co(t,e,n,r){const i=Gt(),o=Ht(),s=dt+t,a=i[11],u=i[s]=gr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ni(e,t,2,i,Vt(a,o));return di(e,n,u,Vt(a,s)),null!==u.attrs&&Mi(u,u.attrs,!1),null!==u.mergedAttrs&&Mi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Jt(c,!0);const l=c.mergedAttrs;null!==l&&we(a,u,l);const h=c.classes;null!==h&&Rr(a,u,h);const f=c.styles;null!==f&&Or(a,u,f),64!=(64&c.flags)&&Sr(o,i,u,c),0===qt.lFrame.elementDepthCount&&nr(u,i),qt.lFrame.elementDepthCount++,bt(c)&&(ui(o,i,c),function(t,e,n){if(mt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&ci(i,c)}function lo(){let t=Kt();Qt()?qt.lFrame.isParent=!1:(t=t.parent,Jt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=Ht();n.firstCreatePass&&(fe(n,t),mt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&uo(n,e,Gt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&uo(n,e,Gt(),e.stylesWithoutHost,!1)}function ho(){return Gt()}function fo(t){return!!t&&"function"==typeof t.then}function po(t){return!!t&&"function"==typeof t.subscribe}const yo=po;function go(t,e,n,r){const i=Gt(),o=Ht(),s=Kt();return function(t,e,n,r,i,o,s,a){const u=bt(r),c=t.firstCreatePass&&Pi(t),l=Ri(e);let h=!0;if(3&r.type||a){const f=Pt(r,e),d=a?a(f):f,p=l.length,y=a?t=>a(Ot(t[r.index])):r.index;if(Nt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=vo(r,e,0,o,!1);const t=n.listen(d,i,o);l.push(o,t),c&&c.push(i,y,p,p+1)}}else o=vo(r,e,0,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,p,s)}else o=vo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),go}function mo(t,e,n,r){try{return!1!==n(r)}catch(i){return Li(t,i),!1}}function vo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Ft(t.index,e):e;0==(32&e[2])&&xi(s);let a=mo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=mo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function bo(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function wo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Qr(o):$r(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];_o(t[a],e)&&(u=!0,t[a+1]=r?Xr(n):Wr(n)),a=r?Qr(n):$r(n)}u&&(t[n+1]=r?Wr(o):Xr(o))}function _o(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&en(t,e)>=0}function Eo(t,e){return function(t,e,n,r){const i=Gt(),o=Ht(),s=function(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[le()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Io(n=To(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=To(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==$r(r))return t[Qr(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=To(null,t,e,n[1],r),n=Io(n,e.attrs,r),function(t,e,n,r){t[Qr(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Io(r,t[o].hostAttrs,true);return Io(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=Qr(s),u=$r(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||en(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Qr(t[a+1]);t[r+1]=Jr(e,a),0!==e&&(t[e+1]=Yr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Jr(a,0),0!==a&&(t[a+1]=Yr(t[a+1],r)),a=r;else t[r+1]=Jr(u,0),0===a?a=r:t[u+1]=Yr(t[u+1],r),u=r;l&&(t[r+1]=Wr(t[r+1])),wo(t,c,r,!0),wo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&en(o,e)>=0&&(n[r+1]=Xr(n[r+1]))}(e,c,t,r),s=Jr(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==zr&&io(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Ao(1==(1&c)?So(u,e,n,i,$r(c),s):void 0)||(Ao(o)||function(t){return 2==(2&t)}(c)&&(o=So(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Nt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Rt(le(),n),i,o))}(o,o.data[le()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=g(In(t))),t}(e),true,s)}(t,e),Eo}function To(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Io(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Io(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Xe(t,s,!!n||e[++o]))}return void 0===t?null:t}function So(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===zr&&(l=c?Z:void 0);let h=c?tn(l,r):u===r?l:void 0;if(o&&!Ao(h)&&(h=tn(e,r)),Ao(h)&&(a=h,s))return a;const f=t[i+1];i=s?Qr(f):$r(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=tn(t,r))}return a}function Ao(t){return void 0!==t}function Co(t,e=""){const n=Gt(),r=Ht(),i=t+dt,o=r.firstCreatePass?ni(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Nt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Sr(r,n,s,o),Jt(o,!1)}function xo(t){return ko("",t,""),xo}function ko(t,e,n){const r=Gt(),i=function(t,e,n,r){return io(t,Yt(),n)?e+E(n)+r:zr}(r,t,e,n);return i!==zr&&function(t,e,n){const r=Rt(e,t);!function(t,e,n){Nt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,le(),i),ko}const No=void 0;var Do=["en",[["a","p"],["AM","PM"],No],[["AM","PM"],No,No],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],No,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],No,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",No,"{1} 'at' {0}",No],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Oo={};function Ro(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Lo(e);if(n)return n;const r=e.split("-")[0];if(n=Lo(r),n)return n;if("en"===r)return Do;throw new Error(`Missing locale data for the locale "${t}".`)}function Po(t){return Ro(t)[Fo.PluralCase]}function Lo(t){return t in Oo||(Oo[t]=z.ng&&z.ng.common&&z.ng.common.locales&&z.ng.common.locales[t]),Oo[t]}var Fo=(()=>((Fo=Fo||{})[Fo.LocaleId=0]="LocaleId",Fo[Fo.DayPeriodsFormat=1]="DayPeriodsFormat",Fo[Fo.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fo[Fo.DaysFormat=3]="DaysFormat",Fo[Fo.DaysStandalone=4]="DaysStandalone",Fo[Fo.MonthsFormat=5]="MonthsFormat",Fo[Fo.MonthsStandalone=6]="MonthsStandalone",Fo[Fo.Eras=7]="Eras",Fo[Fo.FirstDayOfWeek=8]="FirstDayOfWeek",Fo[Fo.WeekendRange=9]="WeekendRange",Fo[Fo.DateFormat=10]="DateFormat",Fo[Fo.TimeFormat=11]="TimeFormat",Fo[Fo.DateTimeFormat=12]="DateTimeFormat",Fo[Fo.NumberSymbols=13]="NumberSymbols",Fo[Fo.NumberFormats=14]="NumberFormats",Fo[Fo.CurrencyCode=15]="CurrencyCode",Fo[Fo.CurrencySymbol=16]="CurrencySymbol",Fo[Fo.CurrencyName=17]="CurrencyName",Fo[Fo.Currencies=18]="Currencies",Fo[Fo.Directionality=19]="Directionality",Fo[Fo.PluralCase=20]="PluralCase",Fo[Fo.ExtraData=21]="ExtraData",Fo))();const Mo="en-US";let Vo=Mo;function jo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Vo=t.toLowerCase().replace(/_/g,"-"))}class Uo{}class qo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${g(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class Bo{}function Go(...t){}function Ho(t,e){return new Ko(Pt(t,e))}Bo.NULL=new qo;const zo=function(){return Ho(Kt(),Gt())};let Ko=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=zo,t})();class Zo{}let Jo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Qo(),t})();const Qo=function(){const t=Gt(),e=Ft(Kt().index,t);return function(t){return t[11]}(yt(e)?e:t)};let Wo=(()=>{class t{}return t.\u0275prov=S({token:t,providedIn:"root",factory:()=>null}),t})();class $o{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Yo=new $o("12.1.3");class Xo{constructor(){}supports(t){return no(t)}create(t){return new es(t)}}const ts=(t,e)=>e;class es{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ts}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<os(n,r,i)?e:n,s=os(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!no(t))throw new Error(`Error trying to diff '${g(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[eo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ns(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new is),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new is),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ns{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class is{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new rs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function os(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ss{constructor(){}supports(t){return t instanceof Map||ro(t)}create(){return new as}}class as{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||ro(t)))throw new Error(`Error trying to diff '${g(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new us(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class us{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cs(){return new ls([new Xo])}let ls=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||cs()),deps:[[t,new yn,new pn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=S({token:t,providedIn:"root",factory:cs}),t})();function hs(){return new fs([new ss])}let fs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||hs()),deps:[[t,new yn,new pn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=S({token:t,providedIn:"root",factory:hs}),t})();function ds(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Ot(o)),gt(o))for(let t=pt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ds(e[1],e,n,r)}const s=n.type;if(8&s)ds(t,e,n.child,r);else if(32&s){const t=lr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Cr(e,n);if(Array.isArray(t))r.push(...t);else{const n=hr(e[16]);ds(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ps{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ds(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(gt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(vr(t,n),Ye(e,n))}this._attachedToViewContainer=!1}br(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=Ri(e);i.push(r)}(0,this._lView,0,t)}markForCheck(){xi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ki(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){$t(!0);try{ki(t,e,n)}finally{$t(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Nr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ys extends ps{constructor(t){super(t),this._view=t}detectChanges(){Ni(this._view)}checkNoChanges(){!function(t){$t(!0);try{Ni(t)}finally{$t(!1)}}(this._view)}get context(){return null}}const gs=function(t){return function(t,e,n){if(vt(t)&&!n){const n=Ft(t.index,e);return new ps(n,n)}return 47&t.type?new ps(e[16],e):null}(Kt(),Gt(),16==(16&t))};let ms=(()=>{class t{}return t.__NG_ELEMENT_ID__=gs,t})();const vs=[new ss],bs=new ls([new Xo]),ws=new fs(vs),_s=function(){return t=Kt(),e=Gt(),4&t.type?new Is(e,t,Ho(t,e)):null;var t,e};let Es=(()=>{class t{}return t.__NG_ELEMENT_ID__=_s,t})();const Ts=Es,Is=class extends Ts{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ei(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),ii(e,n,t),new ps(n)}};class Ss{}const As=function(){return function(t,e){let n;const r=e[t.index];if(gt(r))n=r;else{let i;if(8&t.type)i=Ot(r);else{const n=e[11];i=n.createComment("");const r=Pt(t,e);_r(n,Ir(n,r),i,function(t,e){return Nt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ti(r,e,i,t),Ci(e,n)}return new ks(n,t,e)}(Kt(),Gt())};let Cs=(()=>{class t{}return t.__NG_ELEMENT_ID__=As,t})();const xs=Cs,ks=class extends xs{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ho(this._hostTNode,this._hostLView)}get injector(){return new ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=Pe(this._hostTNode,this._hostLView);if(Se(t)){const e=Ce(t,this._hostLView),n=Ae(t);return new ze(e[1].data[n+8],e)}return new ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Ns(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-pt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ss,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(gt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ks(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=pt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-pt?(e[4]=n[i],$e(n,pt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=xr(i,o),a=n[11],u=Ir(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Nr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),$e(Ds(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Ns(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=vr(this._lContainer,e);n&&(Ye(Ds(this._lContainer),e),br(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=vr(this._lContainer,e);return n&&null!=Ye(Ds(this._lContainer),e)?new ps(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Ns(t){return t[8]}function Ds(t){return t[8]||(t[8]=[])}const Os={};class Rs extends Bo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ht(t);return new Fs(e,this.ngModule)}}function Ps(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ls=new Qe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ar});class Fs extends Uo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Hr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ps(this.componentDef.inputs)}get outputs(){return Ps(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Os,i);return o!==Os||r===Os?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Zo,Dt),s=i.get(Wo,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Nt(t))return t.selectRootElement(e,n===U.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):gr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:ar,clean:Oi,playerHandler:null,flags:0},f=hi(0,null,null,1,0,null,null,null,null,null),d=ei(null,f,h,l,null,null,o,a,s,i);let p,y;ie(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ni(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Mi(a,u,!0),null!==t&&(we(i,t,u),null!==a.classes&&Rr(i,t,a.classes),null!==a.styles&&Or(i,t,a.styles)));const c=r.createRenderer(t,e),l=ei(n,li(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Le(De(a,n),s,e.type),gi(s,a),vi(a,n.length,1)),Ci(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)we(a,c,["ng-version",Yo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Ur(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&we(a,c,t),e&&e.length>0&&Rr(a,c,e.join(" "))}if(y=Lt(f,dt),void 0!==e){const t=y.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),bi(t,r,e,ri(t,e,1,null),n));const i=Be(e,t,r.directiveStart,r);nr(i,e);const o=Pt(r,e);return o&&nr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(he(a.index),pi(n[1],a,0,a.directiveStart,a.directiveEnd,e),yi(e,s)),s}(t,this.componentDef,d,h,[Xi]),ii(f,d,null)}finally{ce()}return new Ms(this.componentType,p,Ho(y,d),d,y)}}class Ms extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ys(r),this.componentType=t}get injector(){return new ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Vs=new Map;class js extends Ss{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Rs(this);const n=ft(t),r=t[Y]||null;r&&jo(r),this._bootstrapComponents=ur(n.bootstrap),this._r3Injector=zi(t,e,[{provide:Ss,useValue:this},{provide:Bo,useValue:this.componentFactoryResolver}],g(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Yi.THROW_IF_NOT_FOUND,n=P.Default){return t===Yi||t===Ss||t===Vi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Us extends class{}{constructor(t){super(),this.moduleType=t,null!==ft(t)&&function(t){const e=new Set;!function t(n){const r=ft(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${g(e)} vs ${g(e.name)}`)}(i,Vs.get(i),n),Vs.set(i,n));const o=ur(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new js(this.moduleType,t)}}function qs(t){return e=>{setTimeout(t,void 0,e)}}const Bs=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=qs(u),a&&(a=qs(a)),c&&(c=qs(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};Symbol;const Gs=new Qe("Application Initializer");let Hs=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Go,this.reject=Go,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(fo(e))t.push(e);else if(yo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(ln(Gs,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const zs=new Qe("AppId"),Ks={provide:zs,useFactory:function(){return`${Zs()}${Zs()}${Zs()}`},deps:[]};function Zs(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Js=new Qe("Platform Initializer"),Qs=new Qe("Platform ID"),Ws=new Qe("appBootstrapListener");let $s=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Ys=new Qe("LocaleId"),Xs=new Qe("DefaultCurrencyCode");class ta{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ea=function(t){return new Us(t)},na=ea,ra=function(t){return Promise.resolve(ea(t))},ia=function(t){const e=ea(t),n=ur(ft(t).declarations).reduce((t,e)=>{const n=ht(e);return n&&t.push(new Fs(n)),t},[]);return new ta(e,n)},oa=ia,sa=function(t){return Promise.resolve(ia(t))};let aa=(()=>{class t{constructor(){this.compileModuleSync=na,this.compileModuleAsync=ra,this.compileModuleAndAllComponentsSync=oa,this.compileModuleAndAllComponentsAsync=sa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const ua=(()=>Promise.resolve(0))();function ca(t){"undefined"==typeof Zone?ua.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class la{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bs(!1),this.onMicrotaskEmpty=new Bs(!1),this.onStable=new Bs(!1),this.onError=new Bs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=z.requestAnimationFrame,e=z.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(z,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,da(t),t.isCheckStableRunning=!0,fa(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),da(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return pa(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),ya(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return pa(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),ya(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,da(t),fa(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!la.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(la.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ha,Go,Go);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ha={};function fa(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function da(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function pa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ya(t){t._nesting--,fa(t)}class ga{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bs,this.onMicrotaskEmpty=new Bs,this.onStable=new Bs,this.onError=new Bs}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ma=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{la.assertNotInAngularZone(),ca(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ca(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(ln(la))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})(),va=(()=>{class t{constructor(){this._applications=new Map,Ea.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ea.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();class ba{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function wa(t){Ea=t}let _a,Ea=new ba,Ta=!0,Ia=!1;function Sa(){return Ia=!0,Ta}function Aa(){if(Ia)throw new Error("Cannot enable prod mode after platform setup.");Ta=!1}const Ca=new Qe("AllowMultipleToken");class xa{constructor(t,e){this.name=t,this.token=e}}function ka(t,e,n=[]){const r=`Platform: ${e}`,i=new Qe(r);return(e=[])=>{let o=Na();if(!o||o.injector.get(Ca,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ui,useValue:"platform"});!function(t){if(_a&&!_a.destroyed&&!_a.injector.get(Ca,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_a=t.get(Da);const e=t.get(Js,null);e&&e.forEach(t=>t())}(Yi.create({providers:t,name:r}))}return function(t){const e=Na();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Na(){return _a&&!_a.destroyed?_a:null}let Da=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ga:("zone.js"===t?void 0:t)||new la({enableLongStackTrace:Sa(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:la,useValue:n}];return n.run(()=>{const e=Yi.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(sr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Pa(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return fo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Hs);return t.runInitializers(),t.donePromise.then(()=>(jo(i.injector.get(Ys,Mo)||Mo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Oa({},e);return function(t,e,n){const r=new Us(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ra);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${g(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(ln(Yi))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Oa(t,e){return Array.isArray(e)?e.reduce(Oa,t):Object.assign(Object.assign({},t),e)}let Ra=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{la.assertNotInAngularZone(),ca(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{la.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(a,c.pipe(t=>{return u()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Uo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ss),i=n.create(Yi.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ma,null),a=s&&i.injector.get(va);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Pa(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Pa(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ws,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(ln(la),ln(Yi),ln(sr),ln(Bo),ln(Hs))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Pa(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const La=function(t){return null},Fa=ka(null,"core",[{provide:Qs,useValue:"unknown"},{provide:Da,deps:[Yi]},{provide:va,deps:[]},{provide:$s,deps:[]}]),Ma=[{provide:Ra,useClass:Ra,deps:[la,Yi,sr,Bo,Hs]},{provide:Ls,deps:[la],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Hs,useClass:Hs,deps:[[new pn,Gs]]},{provide:aa,useClass:aa,deps:[]},Ks,{provide:ls,useFactory:function(){return bs},deps:[]},{provide:fs,useFactory:function(){return ws},deps:[]},{provide:Ys,useFactory:function(t){return jo(t=t||"undefined"!=typeof $localize&&$localize.locale||Mo),t},deps:[[new dn(Ys),new pn,new yn]]},{provide:Xs,useValue:"USD"}];let Va=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(ln(Ra))},t.\u0275mod=st({type:t}),t.\u0275inj=A({providers:Ma}),t})()},987:(t,e,n)=>{"use strict";n.d(e,{hO:()=>N,xv:()=>T,Dh:()=>E,HU:()=>m,GT:()=>_,sI:()=>x,on:()=>S,ss:()=>v,pX:()=>w,yq:()=>A});var r=n(771),i=n(637),o=n(393);function s(){}var a=n(105);class u{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))}}class c extends o.L{constructor(t,e,n,r){super(t),this._tapNext=s,this._tapError=s,this._tapComplete=s,this._tapError=n||s,this._tapComplete=r||s,(0,a.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||s,this._tapError=e.error||s,this._tapComplete=e.complete||s)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}var l=n(101),h=n(309),f=n(693),d=n(329);function p(){}t=n.hmd(t);class y{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class g{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",p,{},p,p)),e.pipe((r={next:n,complete:n,error:n},function(t){return t.lift(new u(r,void 0,void 0))})).subscribe(t).add(n);var r}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class m{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new y(Zone.current)),this.insideAngular=t.run(()=>new y(Zone.current,i.z))}}function v(t){return function(e){return(e=e.lift(new g(t.ngZone))).pipe((0,l.R)(t.outsideAngular),(0,h.QV)(t.insideAngular))}}const b=["ngOnDestroy"],w=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(b.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),_=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},E=new f.OlP("angularfire2.app.options"),T=new f.OlP("angularfire2.app.nameOrConfig"),I=new f.GfV("6.1.5");function S(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=d.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>d.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const A=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function x(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const k={provide:class{},useFactory:S,deps:[E,f.R0b,[new f.FiY,T]]};let N=(()=>{class t{constructor(t){d.Z.registerVersion("angularfire",I.full,t.toString()),d.Z.registerVersion("angular",f.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:E,useValue:e},{provide:T,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(f.LFG(f.Lbi))},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[k]}),t})()},759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,o=n(762),s=n(685),a=n(34),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),y=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(y);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=g;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.28",void 0),t.registerVersion("fire-js","")}(w);const _=w},34:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u});var r=n(762),i=n(685),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>f,Am:()=>d});var o=[],s=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={})),s))(),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>w,r3:()=>T,Sg:()=>u,ne:()=>I,p$:()=>o,ZB:()=>s,m9:()=>C,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>y,w1:()=>g,uI:()=>l,UG:()=>h,b$:()=>p,G6:()=>v,Mn:()=>m});var r=n(762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return c().indexOf("Electron/")>=0}function g(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return c().indexOf("MSAppHost/")>=0}function v(){return!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var b=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,w.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),w=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?_(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new b(i,a,r);return u},t}();function _(t,e){return t.replace(E,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var E=/\{\$([^}]+)}/g;function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function I(t,e){var n=new S(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function A(){}function C(t){return t&&t._delegate?t._delegate:t}},329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(759),i="8.8.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(393),i=n(181),o=n(490),s=n(554),a=n(487),u=n(494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},490:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(494),i=n(449);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(574),i=n(393),o=n(319),s=n(971),a=n(858),u=n(181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(105),i=n(490),o=n(319),s=n(181),a=n(494),u=n(449);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(796),i=n(555),o=n(105);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,o.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof s?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof s?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new s(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(393),i=n(574),o=n(444);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},193:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(574);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(574),i=n(444),o=n(319),s=n(554),a=n(87),u=n(377),c=n(72),l=n(489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},572:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(574),i=n(15),o=n(87);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(574),i=n(869),o=n(840),s=n(572);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},917:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(869),i=n(572),o=n(87);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},2:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},840:(t,e,n)=>{"use strict";n.d(e,{J:()=>l});var r=n(2),i=n(402),o=n(345);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}var c=n(487);function l(t=Number.POSITIVE_INFINITY){return s(c.y,t)}},309:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(393),i=n(193),o=n(917),s=n(574);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(574);let i=1;const o=Promise.resolve(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(465),l=n(102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var f=n(796);class d extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,f.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new d(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new d(e,this.delay,this.scheduler).subscribe(t)}}},87:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(574),i=n(319);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},465:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var r=n(465);const i=new(n(102).v)(r.o)},771:(t,e,n)=>{"use strict";n.d(e,{c:()=>s,N:()=>o});var r=n(465),i=n(102);const o=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),s=o},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},72:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(15),i=n(449),o=n(377),s=n(554),a=n(489),u=n(72),c=n(555);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},15:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},315:(t,e,n)=>{"use strict";var r=n(693);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");var a=(()=>((a=a||{})[a.Zero=0]="Zero",a[a.One=1]="One",a[a.Two=2]="Two",a[a.Few=3]="Few",a[a.Many=4]="Many",a[a.Other=5]="Other",a))();const u=r.kL8;class c{}let l=(()=>{class t extends c{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(u(e||this.locale)(t)){case a.Zero:return"zero";case a.One:return"one";case a.Two:return"two";case a.Few:return"few";case a.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class h{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let f=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Ed){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new h(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new d(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new d(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class d{constructor(t,e){this.record=t,this.view=e}}let p=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new y,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){g("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){g("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class y{constructor(){this.$implicit=null,this.ngIf=null}}function g(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:c,useClass:l}]}),t})();class v extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new v,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(w=w||document.querySelector("base"),w?w.getAttribute("href"):null);return null==e?null:function(t){b=b||document.createElement("a"),b.setAttribute("href",t);const e=b.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){w=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let b,w=null;const _=new r.OlP("TRANSITION_ID"),E=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[_,s,r.zs3],multi:!0}];class T{static init(){(0,r.VLi)(new T)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let I=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const S=new r.OlP("EventManagerPlugins");let A=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(S),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class C{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let x=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),k=(()=>{class t extends x{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(N),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(N))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function N(t){o().remove(t)}const D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},O=/%COMP%/g;function R(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?R(t,i,n):(i=i.replace(O,t),n.push(i))}return n}function P(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let L=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new F(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new M(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new V(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=R(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(A),r.LFG(k),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class F{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(D[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=D[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=D[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,P(n)):this.eventManager.addEventListener(t,e,P(n))}}class M extends F{constructor(t,e,n,r){super(t),this.component=n;const i=R(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(O,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(O,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class V extends F{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=R(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let j=(()=>{class t extends C{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const U=["alt","control","meta","shift"],q={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},B={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},G={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let H=(()=>{class t extends C{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(U.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&B.hasOwnProperty(e)&&(e=B[e]))}return q[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),U.forEach(r=>{r!=n&&(0,G[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const z=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){v.makeCurrent(),T.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),K=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:S,useClass:j,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:S,useClass:H,multi:!0,deps:[s]},[],{provide:L,useClass:L,deps:[A,k,r.AFp]},{provide:r.FYo,useExisting:L},{provide:x,useExisting:k},{provide:k,useClass:k,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:A,useClass:A,deps:[S,r.R0b]},{provide:class{},useClass:I,deps:[]},[]];let Z=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:_,useExisting:r.AFp},E]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:K,imports:[m,r.hGG]}),t})();"undefined"!=typeof window&&window;var J=n(987),Q=n(637),W=n(574),$=n(402),Y=n(917),X=n(840);function tt(...t){return(0,X.J)(1)((0,Y.of)(...t))}var et=n(869);function nt(...t){const e=t[t.length-1];return(0,et.K)(e)?(t.pop(),n=>tt(t,n,e)):e=>tt(t,e)}var rt=n(393);function it(){return t=>t.lift(new ot)}class ot{call(t,e){return e.subscribe(new st(t))}}class st extends rt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var at=n(2);function ut(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ct(t,e,n))}}class ct{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new lt(t,this.accumulator,this.seed,this.hasSeed))}}class lt extends rt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class ht{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new ft(t,this.compare,this.keySelector))}}class ft extends rt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function dt(t,e){return function(n){return n.lift(new pt(t,e))}}class pt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new yt(t,this.predicate,this.thisArg))}}class yt extends rt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var gt=n(309),mt=n(329),vt=n(759),bt=n(762),wt=n(685),_t=n(300),Et=function(t,e){return(Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Tt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var It,St="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},At=At||{},Ct=St||self;function xt(){}function kt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Nt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Dt="closure_uid_"+(1e9*Math.random()>>>0),Ot=0;function Rt(t,e,n){return t.call.apply(t.bind,arguments)}function Pt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Lt(t,e,n){return(Lt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Rt:Pt).apply(null,arguments)}function Ft(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Mt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Vt(){this.s=this.s,this.o=this.o}var jt={};Vt.prototype.s=!1,Vt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Dt)&&t[Dt]||(t[Dt]=++Ot)}(this);delete jt[t]}},Vt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ut=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},qt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Bt(t){return Array.prototype.concat.apply([],arguments)}function Gt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ht(t){return/^[\s\xa0]*$/.test(t)}var zt,Kt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Zt(t,e){return-1!=t.indexOf(e)}function Jt(t,e){return t<e?-1:t>e?1:0}t:{var Qt=Ct.navigator;if(Qt){var Wt=Qt.userAgent;if(Wt){zt=Wt;break t}}zt=""}function $t(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Yt(t){var e={};for(var n in t)e[n]=t[n];return e}var Xt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Xt.length;o++)n=Xt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ee(t){return ee[" "](t),t}ee[" "]=xt;var ne,re,ie=Zt(zt,"Opera"),oe=Zt(zt,"Trident")||Zt(zt,"MSIE"),se=Zt(zt,"Edge"),ae=se||oe,ue=Zt(zt,"Gecko")&&!(Zt(zt.toLowerCase(),"webkit")&&!Zt(zt,"Edge"))&&!(Zt(zt,"Trident")||Zt(zt,"MSIE"))&&!Zt(zt,"Edge"),ce=Zt(zt.toLowerCase(),"webkit")&&!Zt(zt,"Edge");function le(){var t=Ct.document;return t?t.documentMode:void 0}t:{var he="",fe=(re=zt,ue?/rv:([^\);]+)(\)|;)/.exec(re):se?/Edge\/([\d\.]+)/.exec(re):oe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(re):ce?/WebKit\/(\S+)/.exec(re):ie?/(?:Version)[ \/]?(\S+)/.exec(re):void 0);if(fe&&(he=fe?fe[1]:""),oe){var de=le();if(null!=de&&de>parseFloat(he)){ne=String(de);break t}}ne=he}var pe={};var ye=Ct.document&&oe&&(le()||parseInt(ne,10))||void 0,ge=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ct.addEventListener("test",xt,e),Ct.removeEventListener("test",xt,e)}catch(n){}return t}();function me(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ve(t,e){if(me.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ue){t:{try{ee(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:be[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ve.Z.h.call(this)}}me.prototype.h=function(){this.defaultPrevented=!0},Mt(ve,me);var be={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ee(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++_e,this.ca=this.fa=!1}function Te(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ie(t){this.src=t,this.g={},this.h=0}function Se(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Ut(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Te(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ae(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Ie.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Ae(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Ee(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Ce="closure_lm_"+(1e6*Math.random()|0),xe={};function ke(t,e,n,r,i){if(r&&r.once)return De(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ke(t,e[o],n,r,i);return null}return n=Ve(n),t&&t[we]?t.N(e,n,Nt(r)?!!r.capture:!!r,i):Ne(t,e,n,!1,r,i)}function Ne(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Nt(i)?!!i.capture:!!i,a=Fe(t);if(a||(t[Ce]=a=new Ie(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Le;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ge||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Pe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function De(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)De(t,e[o],n,r,i);return null}return n=Ve(n),t&&t[we]?t.O(e,n,Nt(r)?!!r.capture:!!r,i):Ne(t,e,n,!0,r,i)}function Oe(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Oe(t,e[o],n,r,i);else r=Nt(r)?!!r.capture:!!r,n=Ve(n),t&&t[we]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Ae(o=t.g[e],n,r,i))&&(Te(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=Fe(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ae(e,n,r,i)),(n=-1<t?e[t]:null)&&Re(n))}function Re(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[we])Se(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Pe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Fe(e))?(Se(n,t),0==n.h&&(n.src=null,e[Ce]=null)):Te(t)}}}function Pe(t){return t in xe?xe[t]:xe[t]="on"+t}function Le(t,e){if(t.ca)t=!0;else{e=new ve(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Re(t),t=n.call(r,e)}return t}function Fe(t){return(t=t[Ce])instanceof Ie?t:null}var Me="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ve(t){return"function"==typeof t?t:(t[Me]||(t[Me]=function(e){return t.handleEvent(e)}),t[Me])}function je(){Vt.call(this),this.i=new Ie(this),this.P=this,this.I=null}function Ue(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new me(e,t);else if(e instanceof me)e.target=e.target||t;else{var i=e;te(e=new me(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=qe(s,r,!0,e)&&i}if(i=qe(s=e.g=t,r,!0,e)&&i,i=qe(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=qe(s=e.g=n[o],r,!1,e)&&i}function qe(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Se(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Mt(je,Vt),je.prototype[we]=!0,je.prototype.removeEventListener=function(t,e,n,r){Oe(this,t,e,n,r)},je.prototype.M=function(){if(je.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Te(n[r]);delete e.g[t],e.h--}}this.I=null},je.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},je.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Be=Ct.JSON.stringify;function Ge(){var t=$e,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var He,ze=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Ke.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Ke=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new Ze},function(t){return t.reset()}),Ze=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Je(t){Ct.setTimeout(function(){throw t},0)}function Qe(t,e){He||function(){var t=Ct.Promise.resolve(void 0);He=function(){t.then(Ye)}}(),We||(He(),We=!0),$e.add(t,e)}var We=!1,$e=new ze;function Ye(){for(var t;t=Ge();){try{t.h.call(t.g)}catch(n){Je(n)}var e=Ke;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}We=!1}function Xe(t,e){je.call(this),this.h=t||1,this.g=e||Ct,this.j=Lt(this.kb,this),this.l=Date.now()}function tn(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function en(t,e,n){if("function"==typeof t)n&&(t=Lt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Lt(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ct.setTimeout(t,e||0)}function nn(t){t.g=en(function(){t.g=null,t.i&&(t.i=!1,nn(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Mt(Xe,je),(It=Xe.prototype).da=!1,It.S=null,It.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ue(this,"tick"),this.da&&(tn(this),this.start()))}},It.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){Xe.Z.M.call(this),tn(this),delete this.g};var rn=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Et(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:nn(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Vt);function on(t){Vt.call(this),this.h=t,this.g={}}Mt(on,Vt);var sn=[];function an(t,e,n,r){Array.isArray(n)||(n&&(sn[0]=n.toString()),n=sn);for(var i=0;i<n.length;i++){var o=ke(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function un(t){$t(t.g,function(t,e){this.g.hasOwnProperty(e)&&Re(t)},t),t.g={}}function cn(){this.g=!0}function ln(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Be(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}on.prototype.M=function(){on.Z.M.call(this),un(this)},on.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cn.prototype.Aa=function(){this.g=!1},cn.prototype.info=function(){};var hn={},fn=null;function dn(){return fn=fn||new je}function pn(t){me.call(this,hn.Ma,t)}function yn(t){var e=dn();Ue(e,new pn(e,t))}function gn(t,e){me.call(this,hn.STAT_EVENT,t),this.stat=e}function mn(t){var e=dn();Ue(e,new gn(e,t))}function vn(t,e){me.call(this,hn.Na,t),this.size=e}function bn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){t()},e)}hn.Ma="serverreachability",Mt(pn,me),hn.STAT_EVENT="statevent",Mt(gn,me),hn.Na="timingevent",Mt(vn,me);var wn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_n={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function En(){}function Tn(){}En.prototype.h=null;var In,Sn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function An(){me.call(this,"d")}function Cn(){me.call(this,"c")}function xn(){}function kn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new on(this),this.P=Dn,this.W=new Xe(t=ae?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Nn}function Nn(){this.i=null,this.g="",this.h=!1}Mt(An,me),Mt(Cn,me),Mt(xn,En),xn.prototype.g=function(){return new XMLHttpRequest},xn.prototype.i=function(){return{}},In=new xn;var Dn=45e3,On={},Rn={};function Pn(t,e,n){t.K=1,t.v=rr($n(e)),t.s=n,t.U=!0,Ln(t,null)}function Ln(t,e){t.F=Date.now(),jn(t),t.A=$n(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),gr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Nn,t.g=mi(t.l,n?e:null,!t.s),0<t.O&&(t.L=new rn(Lt(t.Ia,t,t.g),t.O)),an(t.V,t.g,"readystatechange",t.gb),e=t.H?Yt(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),yn(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function Fn(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Mn(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Vn(t,n))==Rn){4==e&&(t.o=4,mn(14),i=!1),ln(t.j,t.m,null,"[Incomplete Response]");break}if(r==On){t.o=4,mn(15),ln(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ln(t.j,t.m,r,null),Hn(t,r)}Fn(t)&&r!=Rn&&r!=On&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,mn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ci(e),e.L=!0,mn(11))):(ln(t.j,t.m,n,"[Invalid Chunked Response]"),Gn(t),Bn(t))}function Vn(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Rn:(n=Number(e.substring(n,r)),isNaN(n)?On:(r+=1)+n>e.length?Rn:(e=e.substr(r,n),t.C=r+n,e))}function jn(t){t.Y=Date.now()+t.P,Un(t,t.P)}function Un(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=bn(Lt(t.eb,t),e)}function qn(t){t.B&&(Ct.clearTimeout(t.B),t.B=null)}function Bn(t){0==t.l.G||t.I||fi(t.l,t)}function Gn(t){qn(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,tn(t.W),un(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Hn(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Tr(n.i,t)))if(n.I=t.N,!t.J&&Tr(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;hi(n),ti(n)}ui(n),mn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=bn(Lt(n.ab,n),6e3));if(1>=Er(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else pi(n,11)}else if((t.J||n.g==t)&&hi(n),!Ht(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Zt(l,"spdy")||Zt(l,"quic")||Zt(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Ir(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,nr(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=gi(r,r.H?r.la:null,r.W),d.J){Sr(r.i,d);var p=d,y=r.K;y&&p.setTimeout(y),p.B&&(qn(p),jn(p)),r.g=d}else ai(r);0<n.l.length&&ri(n)}else"stop"!=o[0]&&"close"!=o[0]||pi(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?pi(n,7):Xr(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}yn(4)}catch(o){}}function zn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(kt(t)||"string"==typeof t)qt(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(kt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(kt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Kn(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Kn)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Zn(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Jn(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Jn(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Jn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(It=kn.prototype).setTimeout=function(t){this.P=t},It.gb=function(t){t=t.target;var e=this.L;e&&3==Jr(t)?e.l():this.Ia(t)},It.Ia=function(t){try{if(t==this.g)t:{var e=Jr(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||ae||this.g&&(this.h.h||this.g.ga()||Qr(this.g)))){this.I||4!=e||7==n||yn(8==n||0>=r?3:2),qn(this);var i=this.g.ba();this.N=i;e:if(Fn(this)){var o=Qr(this.g);t="";var s=o.length,a=4==Jr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Gn(this),Bn(this);var u="";break e}this.h.i=new Ct.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ht(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,mn(12),Gn(this),Bn(this);break t}ln(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Hn(this,i)}this.U?(Mn(this,e,u),ae&&this.i&&3==e&&(an(this.V,this.W,"tick",this.fb),this.W.start())):(ln(this.j,this.m,u,null),Hn(this,u)),4==e&&Gn(this),this.i&&!this.I&&(4==e?fi(this.l,this):(this.i=!1,jn(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,mn(12)):(this.o=0,mn(13)),Gn(this),Bn(this)}}}catch(e){}},It.fb=function(){if(this.g){var t=Jr(this.g),e=this.g.ga();this.C<e.length&&(qn(this),Mn(this,t,e),this.i&&4!=t&&jn(this))}},It.cancel=function(){this.I=!0,Gn(this)},It.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(yn(3),mn(17)),Gn(this),this.o=2,Bn(this)):Un(this,this.Y-t)},(It=Kn.prototype).R=function(){Zn(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},It.T=function(){return Zn(this),this.g.concat()},It.get=function(t,e){return Jn(this.h,t)?this.h[t]:e},It.set=function(t,e){Jn(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},It.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Qn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Wn(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Wn){this.g=void 0!==e?e:t.g,Yn(this,t.j),this.s=t.s,Xn(this,t.i),tr(this,t.m),this.l=t.l,e=t.h;var n=new fr;n.i=e.i,e.g&&(n.g=new Kn(e.g),n.h=e.h),er(this,n),this.o=t.o}else t&&(n=String(t).match(Qn))?(this.g=!!e,Yn(this,n[1]||"",!0),this.s=ir(n[2]||""),Xn(this,n[3]||"",!0),tr(this,n[4]),this.l=ir(n[5]||"",!0),er(this,n[6]||"",!0),this.o=ir(n[7]||"")):(this.g=!!e,this.h=new fr(null,this.g))}function $n(t){return new Wn(t)}function Yn(t,e,n){t.j=n?ir(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Xn(t,e,n){t.i=n?ir(e,!0):e}function tr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function er(t,e,n){e instanceof fr?(t.h=e,function(t,e){e&&!t.j&&(dr(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(pr(this,e),gr(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=or(e,lr)),t.h=new fr(e,t.g))}function nr(t,e,n){t.h.set(e,n)}function rr(t){return nr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ir(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function or(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,sr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Wn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(or(e,ar,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(or(e,ar,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(or(n,"/"==n.charAt(0)?cr:ur,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",or(n,hr)),t.join("")};var ar=/[#\/\?@]/g,ur=/[#\?:]/g,cr=/[#\?]/g,lr=/[#\?@]/g,hr=/#/g;function fr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function dr(t){t.g||(t.g=new Kn,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function pr(t,e){dr(t),e=mr(t,e),Jn(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Jn((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Zn(t)))}function yr(t,e){return dr(t),e=mr(t,e),Jn(t.g.h,e)}function gr(t,e,n){pr(t,e),0<n.length&&(t.i=null,t.g.set(mr(t,e),Gt(n)),t.h+=n.length)}function mr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(It=fr.prototype).add=function(t,e){dr(this),this.i=null,t=mr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},It.forEach=function(t,e){dr(this),this.g.forEach(function(n,r){qt(n,function(n){t.call(e,n,r,this)},this)},this)},It.T=function(){dr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},It.R=function(t){dr(this);var e=[];if("string"==typeof t)yr(this,t)&&(e=Bt(e,this.g.get(mr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Bt(e,t[n])}return e},It.set=function(t,e){return dr(this),this.i=null,yr(this,t=mr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},It.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var vr=function(t,e){this.h=t,this.g=e};function br(t){this.l=t||wr,t=Ct.PerformanceNavigationTiming?0<(t=Ct.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wr=10;function _r(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Er(t){return t.h?1:t.g?t.g.size:0}function Tr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Ir(t,e){t.g?t.g.add(e):t.h=e}function Sr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ar(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Tt(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Gt(t.i)}function Cr(){}function xr(){this.g=new Cr}function kr(t,e,n){var r=n||"";try{zn(t,function(t,n){var i=t;Nt(t)&&(i=Be(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Vp){throw e.push(r+"type="+encodeURIComponent("_badmap")),Vp}}function Nr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Dr(t){this.l=t.$b||null,this.j=t.ib||!1}function Or(t,e){je.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Rr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}br.prototype.cancel=function(){var t,e;if(this.i=Ar(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Tt(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Cr.prototype.stringify=function(t){return Ct.JSON.stringify(t,void 0)},Cr.prototype.parse=function(t){return Ct.JSON.parse(t,void 0)},Mt(Dr,En),Dr.prototype.g=function(){return new Or(this.l,this.j)},Dr.prototype.i=function(t){return function(){return t}}({}),Mt(Or,je);var Rr=0;function Pr(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Lr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fr(t)}function Fr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(It=Or.prototype).open=function(t,e){if(this.readyState!=Rr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Fr(this)},It.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lr(this)),this.readyState=Rr},It.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pr(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},It.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Lr(this):Fr(this),3==this.readyState&&Pr(this)}},It.Ua=function(t){this.g&&(this.response=this.responseText=t,Lr(this))},It.Ta=function(t){this.g&&(this.response=t,Lr(this))},It.ha=function(){this.g&&Lr(this)},It.setRequestHeader=function(t,e){this.v.append(t,e)},It.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Or.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Mr=Ct.JSON.parse;function Vr(t){je.call(this),this.headers=new Kn,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jr,this.K=this.L=!1}Mt(Vr,je);var jr="",Ur=/^https?$/i,qr=["POST","PUT"];function Br(t){return"content-type"==t.toLowerCase()}function Gr(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Hr(t),Kr(t)}function Hr(t){t.D||(t.D=!0,Ue(t,"complete"),Ue(t,"error"))}function zr(t){if(t.h&&void 0!==At&&(!t.C[1]||4!=Jr(t)||2!=t.ba()))if(t.v&&4==Jr(t))en(t.Fa,0,t);else if(Ue(t,"readystatechange"),4==Jr(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Qn)[1]||null;if(!o&&Ct.self&&Ct.self.location){var s=Ct.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ur.test(o?o.toLowerCase():"")}e=i}if(e)Ue(t,"complete"),Ue(t,"success");else{t.m=6;try{var a=2<Jr(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Hr(t)}}finally{Kr(t)}}}function Kr(t,e){if(t.g){Zr(t);var n=t.g,r=t.C[0]?xt:null;t.g=null,t.C=null,e||Ue(t,"ready");try{n.onreadystatechange=r}catch(Vp){}}}function Zr(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ct.clearTimeout(t.A),t.A=null)}function Jr(t){return t.g?t.g.readyState:0}function Qr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case jr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Wr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return $t(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):nr(t,e,n))}function $r(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Yr(t){this.za=0,this.l=[],this.h=new cn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$r("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$r("baseRetryDelayMs",5e3,t),this.$a=$r("retryDelaySeedMs",1e4,t),this.Ya=$r("forwardChannelMaxRetries",2,t),this.ra=$r("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new br(t&&t.concurrentRequestLimit),this.Ca=new xr,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Xr(t){if(ei(t),3==t.G){var e=t.V++,n=$n(t.F);nr(n,"SID",t.J),nr(n,"RID",e),nr(n,"TYPE","terminate"),oi(t,n),(e=new kn(t,t.h,e,void 0)).K=2,e.v=rr($n(n)),n=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(n=Ct.navigator.sendBeacon(e.v.toString(),"")),!n&&Ct.Image&&((new Image).src=e.v,n=!0),n||(e.g=mi(e.l,null),e.g.ea(e.v)),e.F=Date.now(),jn(e)}yi(t)}function ti(t){t.g&&(ci(t),t.g.cancel(),t.g=null)}function ei(t){ti(t),t.u&&(Ct.clearTimeout(t.u),t.u=null),hi(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ct.clearTimeout(t.m),t.m=null)}function ni(t,e){t.l.push(new vr(t.Za++,e)),3==t.G&&ri(t)}function ri(t){_r(t.i)||t.m||(t.m=!0,Qe(t.Ha,t),t.C=0)}function ii(t,e){var n;n=e?e.m:t.V++;var r=$n(t.F);nr(r,"SID",t.J),nr(r,"RID",n),nr(r,"AID",t.U),oi(t,r),t.o&&t.s&&Wr(r,t.o,t.s),n=new kn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=si(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Ir(t.i,n),Pn(n,r,e)}function oi(t,e){t.j&&zn({},function(t,n){nr(e,n,t)})}function si(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Lt(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{kr(l,s,"req"+c+"_")}catch(Wi){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function ai(t){t.g||t.u||(t.Y=1,Qe(t.Ga,t),t.A=0)}function ui(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=bn(Lt(t.Ga,t),di(t,t.A)),t.A++,0))}function ci(t){null!=t.B&&(Ct.clearTimeout(t.B),t.B=null)}function li(t){t.g=new kn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=$n(t.oa);nr(e,"RID","rpc"),nr(e,"SID",t.J),nr(e,"CI",t.N?"0":"1"),nr(e,"AID",t.U),oi(t,e),nr(e,"TYPE","xmlhttp"),t.o&&t.s&&Wr(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=rr($n(e)),n.s=null,n.U=!0,Ln(n,t)}function hi(t){null!=t.v&&(Ct.clearTimeout(t.v),t.v=null)}function fi(t,e){var n=null;if(t.g==e){hi(t),ci(t),t.g=null;var r=2}else{if(!Tr(t.i,e))return;n=e.D,Sr(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Ue(r=dn(),new vn(r,n,e,i)),ri(t)}else ai(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Er(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=bn(Lt(t.Ha,t,e),di(t,t.C)),t.C++,0)))}(t,e)||2==r&&ui(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:pi(t,5);break;case 4:pi(t,10);break;case 3:pi(t,6);break;default:pi(t,2)}}function di(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function pi(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Lt(t.jb,t);n||(n=new Wn("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||Yn(n,"https"),rr(n)),function(t,e){var n=new cn;if(Ct.Image){var r=new Image;r.onload=Ft(Nr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ft(Nr,n,r,"TestLoadImage: error",!1,e),r.onabort=Ft(Nr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ft(Nr,n,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else mn(2);t.G=0,t.j&&t.j.va(e),yi(t),ei(t)}function yi(t){t.G=0,t.I=-1,t.j&&(0==Ar(t.i).length&&0==t.l.length||(t.i.i.length=0,Gt(t.l),t.l.length=0),t.j.ua())}function gi(t,e,n){var r=function(t){return t instanceof Wn?$n(t):new Wn(t,void 0)}(n);if(""!=r.i)e&&Xn(r,e+"."+r.i),tr(r,r.m);else{var i=Ct.location;r=function(t,e,n,r){var i=new Wn(null,void 0);return t&&Yn(i,t),e&&Xn(i,e),n&&tr(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&$t(t.aa,function(t,e){nr(r,e,t)}),n=t.sa,(e=t.D)&&n&&nr(r,e,n),nr(r,"VER",t.ma),oi(t,r),r}function mi(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vr(n&&t.Ba&&!t.qa?new Dr({ib:!0}):t.qa)).L=t.H,e}function vi(){}function bi(){if(oe&&!(10<=Number(ye)))throw Error("Environmental error: no available transport.")}function wi(t,e){je.call(this),this.g=new Yr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ht(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ht(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ti(this)}function _i(t){An.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Ei(){Cn.call(this),this.status=1}function Ti(t){this.g=t}(It=Vr.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():In.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:In),this.g.onreadystatechange=Lt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Gr(this,o)}t=n||"";var i=new Kn(this.headers);r&&zn(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Br,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Ct.FormData&&t instanceof Ct.FormData,!(0<=Ut(qr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Zr(this),0<this.B&&((this.K=function(t){return oe&&function(){return t=pe,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=Kt(String(ne)).split("."),n=Kt("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Jt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Jt(0==o[2].length,0==s[2].length)||Jt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lt(this.pa,this)):this.A=en(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Gr(this,o)}},It.pa=function(){void 0!==At&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ue(this,"timeout"),this.abort(8))},It.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ue(this,"complete"),Ue(this,"abort"),Kr(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kr(this,!0)),Vr.Z.M.call(this)},It.Fa=function(){this.s||(this.F||this.v||this.l?zr(this):this.cb())},It.cb=function(){zr(this)},It.ba=function(){try{return 2<Jr(this)?this.g.status:-1}catch(re){return-1}},It.ga=function(){try{return this.g?this.g.responseText:""}catch(re){return""}},It.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Mr(e)}},It.Da=function(){return this.m},It.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=Yr.prototype).ma=8,It.G=1,It.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},It.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new kn(this,this.h,t,void 0),n=this.s;if(this.P&&(n?te(n=Yt(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=si(this,e,r),nr(i=$n(this.F),"RID",t),nr(i,"CVER",22),this.D&&nr(i,"X-HTTP-Session-Id",this.D),oi(this,i),this.o&&n&&Wr(i,this.o,n),Ir(this.i,e),this.Ra&&nr(i,"TYPE","init"),this.ja?(nr(i,"$req",r),nr(i,"SID","null"),e.$=!0,Pn(e,i,null)):Pn(e,i,r),this.G=2}}else 3==this.G&&(t?ii(this,t):0==this.l.length||_r(this.i)||ii(this))},It.Ga=function(){if(this.u=null,li(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=bn(Lt(this.bb,this),t)}},It.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mn(10),ti(this),li(this))},It.ab=function(){null!=this.v&&(this.v=null,ti(this),ui(this),mn(19))},It.jb=function(t){t?(this.h.info("Successfully pinged google.com"),mn(2)):(this.h.info("Failed to ping google.com"),mn(1))},(It=vi.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Oa=function(){},bi.prototype.g=function(t,e){return new wi(t,e)},Mt(wi,je),wi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Qe(Lt(t.hb,t,e))),mn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=gi(t,null,t.W),ri(t)},wi.prototype.close=function(){Xr(this.g)},wi.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,ni(this.g,e)}else this.v?((e={}).__data__=Be(t),ni(this.g,e)):ni(this.g,t)},wi.prototype.M=function(){this.g.j=null,delete this.j,Xr(this.g),delete this.g,wi.Z.M.call(this)},Mt(_i,An),Mt(Ei,Cn),Mt(Ti,vi),Ti.prototype.xa=function(){Ue(this.g,"a")},Ti.prototype.wa=function(t){Ue(this.g,new _i(t))},Ti.prototype.va=function(t){Ue(this.g,new Ei(t))},Ti.prototype.ua=function(){Ue(this.g,"b")},bi.prototype.createWebChannel=bi.prototype.g,wi.prototype.send=wi.prototype.u,wi.prototype.open=wi.prototype.m,wi.prototype.close=wi.prototype.close,wn.NO_ERROR=0,wn.TIMEOUT=8,wn.HTTP_ERROR=6,_n.COMPLETE="complete",Tn.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",je.prototype.listen=je.prototype.N,Vr.prototype.listenOnce=Vr.prototype.O,Vr.prototype.getLastError=Vr.prototype.La,Vr.prototype.getLastErrorCode=Vr.prototype.Da,Vr.prototype.getStatus=Vr.prototype.ba,Vr.prototype.getResponseJson=Vr.prototype.Qa,Vr.prototype.getResponseText=Vr.prototype.ga,Vr.prototype.send=Vr.prototype.ea;var Ii=wn,Si=_n,Ai=hn,Ci=Dr,xi=Tn,ki=Vr,Ni=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ni.o=-1;var Di={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Oi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,bt.ZT)(e,t),e}(Error),Ri=new _t.Yd("@firebase/firestore");function Pi(){return Ri.logLevel}function Li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ri.logLevel<=_t.in.DEBUG){var r=e.map(Vi);Ri.debug.apply(Ri,(0,bt.ev)(["Firestore (8.8.0): "+t],r))}}function Fi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ri.logLevel<=_t.in.ERROR){var r=e.map(Vi);Ri.error.apply(Ri,(0,bt.ev)(["Firestore (8.8.0): "+t],r))}}function Mi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ri.logLevel<=_t.in.WARN){var r=e.map(Vi);Ri.warn.apply(Ri,(0,bt.ev)(["Firestore (8.8.0): "+t],r))}}function Vi(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Vp){return t}}function ji(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.0) INTERNAL ASSERTION FAILED: "+t;throw Fi(e),new Error(e)}function Ui(t,e){t||ji()}function qi(t,e){return t}function Bi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Gi=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Bi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Hi(t,e){return t<e?-1:t>e?1:0}function zi(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Ki(t){return t+"\0"}var Zi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Oi(Di.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Oi(Di.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Oi(Di.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Oi(Di.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Hi(this.nanoseconds,t.nanoseconds):Hi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ji=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Zi(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Qi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $i(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Yi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ji(),void 0===n?n=t.length-e:n>t.length-e&&ji(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bt.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Oi(Di.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Yi),to=/^[_a-zA-Z][_a-zA-Z0-9]*$/,eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bt.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return to.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Oi(Di.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Oi(Di.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Oi(Di.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Oi(Di.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Yi),no=function(){function t(t){this.fields=t,t.sort(eo.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return zi(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ro=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Hi(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ro.EMPTY_BYTE_STRING=new ro("");var io=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oo(t){if(Ui(!!t),"string"==typeof t){var e=0,n=io.exec(t);if(Ui(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:so(t.seconds),nanos:so(t.nanos)}}function so(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ao(t){return"string"==typeof t?ro.fromBase64String(t):ro.fromUint8Array(t)}function uo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function co(t){var e=t.mapValue.fields.__previous_value__;return uo(e)?co(e):e}function lo(t){var e=oo(t.mapValue.fields.__local_write_time__.timestampValue);return new Zi(e.seconds,e.nanos)}function ho(t){return null==t}function fo(t){return 0===t&&1/t==-1/0}function po(t){return"number"==typeof t&&Number.isInteger(t)&&!fo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var yo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Xi.fromString(e))},t.fromName=function(e){return new t(Xi.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Xi.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Xi.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Xi(e.slice()))},t}();function go(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uo(t)?4:10:ji()}function mo(t,e){var n=go(t);if(n!==go(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lo(t).isEqual(lo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=oo(t.timestampValue),r=oo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ao(t.bytesValue).isEqual(ao(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return so(t.geoPointValue.latitude)===so(e.geoPointValue.latitude)&&so(t.geoPointValue.longitude)===so(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return so(t.integerValue)===so(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=so(t.doubleValue),r=so(e.doubleValue);return n===r?fo(n)===fo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return zi(t.arrayValue.values||[],e.arrayValue.values||[],mo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Qi(n)!==Qi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!mo(n[i],r[i])))return!1;return!0}(t,e);default:return ji()}}function vo(t,e){return void 0!==(t.values||[]).find(function(t){return mo(t,e)})}function bo(t,e){var n=go(t),r=go(e);if(n!==r)return Hi(n,r);switch(n){case 0:return 0;case 1:return Hi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=so(t.integerValue||t.doubleValue),r=so(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return wo(t.timestampValue,e.timestampValue);case 4:return wo(lo(t),lo(e));case 5:return Hi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ao(t),r=ao(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Hi(n[i],r[i]);if(0!==o)return o}return Hi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Hi(so(t.latitude),so(e.latitude));return 0!==n?n:Hi(so(t.longitude),so(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=bo(n[i],r[i]);if(o)return o}return Hi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Hi(r[s],o[s]);if(0!==a)return a;var u=bo(n[r[s]],i[o[s]]);if(0!==u)return u}return Hi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ji()}}function wo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Hi(t,e);var n=oo(t),r=oo(e),i=Hi(n.seconds,r.seconds);return 0!==i?i:Hi(n.nanos,r.nanos)}function _o(t){return Eo(t)}function Eo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=oo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ao(t.bytesValue).toBase64():"referenceValue"in t?yo.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Eo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Eo(t.fields[o])}return e+"}"}(t.mapValue):ji();var e}function To(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Io(t){return!!t&&"integerValue"in t}function So(t){return!!t&&"arrayValue"in t}function Ao(t){return!!t&&"nullValue"in t}function Co(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xo(t){return!!t&&"mapValue"in t}function ko(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Wi(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=ko(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ko(t.arrayValue.values[r]);return n}return Object.assign({},t)}var No=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!xo(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ko(e)},t.prototype.setAll=function(t){var e=this,n=eo.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ko(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());xo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return mo(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];xo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Wi(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(ko(this.value))},t}();function Do(t){var e=[];return Wi(t.fields,function(t,n){var r=new eo([t]);if(xo(n)){var i=Do(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new no(e)}var Oo=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Ji.min(),No.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,No.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,No.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=No.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=No.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ro=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Po(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ro(t,e,n,r,i,o,s)}function Lo(t){var e=qi(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+_o(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),ho(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Jo(e.startAt)),e.endAt&&(n+="|ub:",n+=Jo(e.endAt)),e.h=n}return e.h}function Fo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Wo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!mo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yo(t.startAt,e.startAt)&&Yo(t.endAt,e.endAt)}function Mo(t){return yo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Vo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,bt.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new jo(t,n,r):"array-contains"===n?new Go(t,r):"in"===n?new Ho(t,r):"not-in"===n?new zo(t,r):"array-contains-any"===n?new Ko(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Uo(t,n):new qo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(bo(e,this.value)):null!==e&&go(this.value)===go(e)&&this.m(bo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ji()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),jo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=yo.fromName(r.referenceValue),i}return(0,bt.ZT)(e,t),e.prototype.matches=function(t){var e=yo.comparator(t.key,this.key);return this.m(e)},e}(Vo),Uo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Bo(0,n),r}return(0,bt.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Vo),qo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Bo(0,n),r}return(0,bt.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Vo);function Bo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return yo.fromName(t.referenceValue)})}var Go=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,bt.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return So(e)&&vo(e.arrayValue,this.value)},e}(Vo),Ho=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,bt.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&vo(this.value.arrayValue,e)},e}(Vo),zo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,bt.ZT)(e,t),e.prototype.matches=function(t){if(vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!vo(this.value.arrayValue,e)},e}(Vo),Ko=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,bt.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!So(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return vo(e.value.arrayValue,t)})},e}(Vo),Zo=function(t,e){this.position=t,this.before=e};function Jo(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return _o(t)}).join(",")}var Qo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Wo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function $o(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?yo.comparator(yo.fromName(s.referenceValue),n.key):bo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Yo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!mo(t.position[n],e.position[n]))return!1;return!0}var Xo=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function ts(t,e,n,r,i,o,s,a){return new Xo(t,e,n,r,i,o,s,a)}function es(t){return new Xo(t)}function ns(t){return!ho(t.limit)&&"F"===t.limitType}function rs(t){return!ho(t.limit)&&"L"===t.limitType}function is(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function os(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ss(t){return null!==t.collectionGroup}function as(t){var e=qi(t);if(null===e.p){e.p=[];var n=os(e),r=is(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Qo(n)),e.p.push(new Qo(eo.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Qo(eo.keyField(),u))}}}return e.p}function us(t){var e=qi(t);if(!e.T)if("F"===e.limitType)e.T=Po(e.path,e.collectionGroup,as(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=as(e);r<i.length;r++){var o=i[r];n.push(new Qo(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Zo(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Zo(e.startAt.position,!e.startAt.before):null;e.T=Po(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function cs(t,e,n){return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ls(t,e){return Fo(us(t),us(e))&&t.limitType===e.limitType}function hs(t){return Lo(us(t))+"|lt:"+t.limitType}function fs(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+_o(e.value);var e}).join(", ")+"]"),ho(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Jo(t.startAt)),t.endAt&&(e+=", endAt: "+Jo(t.endAt)),"Target("+e+")"}(us(t))+"; limitType="+t.limitType+")"}function ds(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):yo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!$o(t.startAt,as(t),e)||t.endAt&&$o(t.endAt,as(t),e))}(t,e)}function ps(t){return function(e,n){for(var r=!1,i=0,o=as(t);i<o.length;i++){var s=o[i],a=ys(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function ys(t,e,n){var r=t.field.isKeyField()?yo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?bo(r,i):ji()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ji()}}function gs(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fo(e)?"-0":e}}function ms(t){return{integerValue:""+t}}function vs(t,e){return po(e)?ms(e):gs(t,e)}var bs=function(){this._=void 0};function ws(t,e,n){return t instanceof Ts?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Is?Ss(t,e):t instanceof As?Cs(t,e):function(t,e){var n=Es(t,e),r=ks(n)+ks(t.A);return Io(n)&&Io(t.A)?ms(r):gs(t.R,r)}(t,e)}function _s(t,e,n){return t instanceof Is?Ss(t,e):t instanceof As?Cs(t,e):n}function Es(t,e){return t instanceof xs?Io(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ts=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bt.ZT)(e,t),e}(bs),Is=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,bt.ZT)(e,t),e}(bs);function Ss(t,e){for(var n=Ns(e),r=function(t){n.some(function(e){return mo(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var As=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,bt.ZT)(e,t),e}(bs);function Cs(t,e){for(var n=Ns(e),r=function(t){n=n.filter(function(e){return!mo(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var xs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,bt.ZT)(e,t),e}(bs);function ks(t){return so(t.integerValue||t.doubleValue)}function Ns(t){return So(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ds=function(t,e){this.field=t,this.transform=e},Os=function(t,e){this.version=t,this.transformResults=e},Rs=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ps(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ls=function(){};function Fs(t,e,n){t instanceof qs?function(t,e,n){var r=t.value.clone(),i=Hs(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Bs?function(t,e,n){if(Ps(t.precondition,e)){var r=Hs(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Gs(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Ms(t,e,n){t instanceof qs?function(t,e,n){if(Ps(t.precondition,e)){var r=t.value.clone(),i=zs(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Us(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Bs?function(t,e,n){if(Ps(t.precondition,e)){var r=zs(t.fieldTransforms,n,e),i=e.data;i.setAll(Gs(t)),i.setAll(r),e.convertToFoundDocument(Us(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Ps(t.precondition,e)&&e.convertToNoDocument(Ji.min())}(t,e)}function Vs(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Es(o.transform,s||null);null!=a&&(null==n&&(n=No.empty()),n.set(o.field,a))}return n||null}function js(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&zi(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Is&&e instanceof Is||t instanceof As&&e instanceof As?zi(t.elements,e.elements,mo):t instanceof xs&&e instanceof xs?mo(t.A,e.A):t instanceof Ts&&e instanceof Ts}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Us(t){return t.isFoundDocument()?t.version:Ji.min()}var qs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,bt.ZT)(e,t),e}(Ls),Bs=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,bt.ZT)(e,t),e}(Ls);function Gs(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Hs(t,e,n){var r=new Map;Ui(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,_s(s,a,n[i]))}return r}function zs(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,ws(a,u,e))}return r}var Ks,Zs,Js=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,bt.ZT)(e,t),e}(Ls),Qs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,bt.ZT)(e,t),e}(Ls),Ws=function(t){this.count=t};function $s(t){switch(t){case Di.OK:return ji();case Di.CANCELLED:case Di.UNKNOWN:case Di.DEADLINE_EXCEEDED:case Di.RESOURCE_EXHAUSTED:case Di.INTERNAL:case Di.UNAVAILABLE:case Di.UNAUTHENTICATED:return!1;case Di.INVALID_ARGUMENT:case Di.NOT_FOUND:case Di.ALREADY_EXISTS:case Di.PERMISSION_DENIED:case Di.FAILED_PRECONDITION:case Di.ABORTED:case Di.OUT_OF_RANGE:case Di.UNIMPLEMENTED:case Di.DATA_LOSS:return!0;default:return ji()}}function Ys(t){if(void 0===t)return Fi("GRPC error has no .code"),Di.UNKNOWN;switch(t){case Ks.OK:return Di.OK;case Ks.CANCELLED:return Di.CANCELLED;case Ks.UNKNOWN:return Di.UNKNOWN;case Ks.DEADLINE_EXCEEDED:return Di.DEADLINE_EXCEEDED;case Ks.RESOURCE_EXHAUSTED:return Di.RESOURCE_EXHAUSTED;case Ks.INTERNAL:return Di.INTERNAL;case Ks.UNAVAILABLE:return Di.UNAVAILABLE;case Ks.UNAUTHENTICATED:return Di.UNAUTHENTICATED;case Ks.INVALID_ARGUMENT:return Di.INVALID_ARGUMENT;case Ks.NOT_FOUND:return Di.NOT_FOUND;case Ks.ALREADY_EXISTS:return Di.ALREADY_EXISTS;case Ks.PERMISSION_DENIED:return Di.PERMISSION_DENIED;case Ks.FAILED_PRECONDITION:return Di.FAILED_PRECONDITION;case Ks.ABORTED:return Di.ABORTED;case Ks.OUT_OF_RANGE:return Di.OUT_OF_RANGE;case Ks.UNIMPLEMENTED:return Di.UNIMPLEMENTED;case Ks.DATA_LOSS:return Di.DATA_LOSS;default:return ji()}}(Zs=Ks||(Ks={}))[Zs.OK=0]="OK",Zs[Zs.CANCELLED=1]="CANCELLED",Zs[Zs.UNKNOWN=2]="UNKNOWN",Zs[Zs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zs[Zs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zs[Zs.NOT_FOUND=5]="NOT_FOUND",Zs[Zs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zs[Zs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zs[Zs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zs[Zs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zs[Zs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zs[Zs.ABORTED=10]="ABORTED",Zs[Zs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zs[Zs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zs[Zs.INTERNAL=13]="INTERNAL",Zs[Zs.UNAVAILABLE=14]="UNAVAILABLE",Zs[Zs.DATA_LOSS=15]="DATA_LOSS";var Xs=function(){function t(t,e){this.comparator=t,this.root=e||ea.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ea.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ea.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ta(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ta(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ta(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ta(this.root,t,this.comparator,!0)},t}(),ta=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ea=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw ji();if(this.right.isRed())throw ji();var t=this.left.check();if(t!==this.right.check())throw ji();return t+(this.isRed()?0:1)},t}();ea.EMPTY=null,ea.RED=!0,ea.BLACK=!1,ea.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ji()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ji()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ji()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ji()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ji()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ea(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var na=function(){function t(t){this.comparator=t,this.data=new Xs(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ra(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ra(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ra=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ia=new Xs(yo.comparator);function oa(){return ia}var sa=new Xs(yo.comparator);function aa(){return sa}var ua=new Xs(yo.comparator);function ca(){return ua}var la=new na(yo.comparator);function ha(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=la,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var fa=new na(Hi);function da(){return fa}var pa=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ya.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Ji.min(),r,da(),oa(),ha())},t}(),ya=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ro.EMPTY_BYTE_STRING,n,ha(),ha(),ha())},t}(),ga=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ma=function(t,e){this.targetId=t,this.V=e},va=function(t,e,n,r){void 0===n&&(n=ro.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ba=function(){function t(){this.S=0,this.D=Ea(),this.C=ro.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=ha(),e=ha(),n=ha();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ji()}}),new ya(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ea()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),wa=function(){function t(t){this.W=t,this.G=new Map,this.H=oa(),this.J=_a(),this.Y=new na(Hi)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:ji()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Mo(i))if(0===n){var o=new yo(i.path);this.tt(e,o,Oo.newNoDocument(o,Ji.min()))}else Ui(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Mo(o.target)){var s=new yo(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Oo.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=ha();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new pa(t,n,this.Y,this.H,r);return this.H=oa(),this.J=_a(),this.Y=new na(Hi),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ba,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new na(Hi),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Li("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ba),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function _a(){return new Xs(yo.comparator)}function Ea(){return new Xs(yo.comparator)}var Ta={asc:"ASCENDING",desc:"DESCENDING"},Ia={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sa=function(t,e){this.databaseId=t,this.I=e};function Aa(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ca(t,e){return t.I?e.toBase64():e.toUint8Array()}function xa(t,e){return Aa(t,e.toTimestamp())}function ka(t){return Ui(!!t),Ji.fromTimestamp(function(t){var e=oo(t);return new Zi(e.seconds,e.nanos)}(t))}function Na(t,e){return function(t){return new Xi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Da(t){var e=Xi.fromString(t);return Ui(eu(e)),e}function Oa(t,e){return Na(t.databaseId,e.path)}function Ra(t,e){var n=Da(e);if(n.get(1)!==t.databaseId.projectId)throw new Oi(Di.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Oi(Di.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new yo(Ma(n))}function Pa(t,e){return Na(t.databaseId,e)}function La(t){var e=Da(t);return 4===e.length?Xi.emptyPath():Ma(e)}function Fa(t){return new Xi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ma(t){return Ui(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Va(t,e,n){return{name:Oa(t,e),fields:n.value.mapValue.fields}}function ja(t,e,n){var r=Ra(t,e.name),i=ka(e.updateTime),o=new No({mapValue:{fields:e.fields}}),s=Oo.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Ua(t,e){var n;if(e instanceof qs)n={update:Va(t,e.key,e.value)};else if(e instanceof Js)n={delete:Oa(t,e.key)};else if(e instanceof Bs)n={update:Va(t,e.key,e.data),updateMask:tu(e.fieldMask)};else{if(!(e instanceof Qs))return ji();n={verify:Oa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Ts)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Is)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof As)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof xs)return{fieldPath:e.field.canonicalString(),increment:n.A};throw ji()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:xa(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ji()}(t,e.precondition)),n}function qa(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Rs.updateTime(ka(t.updateTime)):void 0!==t.exists?Rs.exists(t.exists):Rs.none()}(e.currentDocument):Rs.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Ui("REQUEST_TIME"===e.setToServerValue),n=new Ts):"appendMissingElements"in e?n=new Is(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new As(e.removeAllFromArray.values||[]):"increment"in e?n=new xs(t,e.increment):ji();var r=eo.fromServerFormat(e.fieldPath);return new Ds(r,n)}(t,e)}):[];if(e.update){var i=Ra(t,e.update.name),o=new No({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new no((t.fieldPaths||[]).map(function(t){return eo.fromServerFormat(t)}))}(e.updateMask);return new Bs(i,o,s,n,r)}return new qs(i,o,n,r)}if(e.delete){var a=Ra(t,e.delete);return new Js(a,n)}if(e.verify){var u=Ra(t,e.verify);return new Qs(u,n)}return ji()}function Ba(t,e){return{documents:[Pa(t,e.path)]}}function Ga(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Co(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NAN"}};if(Ao(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Co(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NAN"}};if(Ao(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(t.field),op:Qa(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Wa(t.field),direction:Ja(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ho(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ka(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ka(e.endAt)),n}function Ha(t){var e=La(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ui(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=za(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Qo($a(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return ho(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Za(n.startAt));var l=null;return n.endAt&&(l=Za(n.endAt)),ts(e,i,a,s,u,"F",c,l)}function za(t){return t?void 0!==t.unaryFilter?[Xa(t)]:void 0!==t.fieldFilter?[Ya(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return za(t)}).reduce(function(t,e){return t.concat(e)}):ji():[]}function Ka(t){return{before:t.before,values:t.position}}function Za(t){return new Zo(t.values||[],!!t.before)}function Ja(t){return Ta[t]}function Qa(t){return Ia[t]}function Wa(t){return{fieldPath:t.canonicalString()}}function $a(t){return eo.fromServerFormat(t.fieldPath)}function Ya(t){return Vo.create($a(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ji()}}(t.fieldFilter.op),t.fieldFilter.value)}function Xa(t){switch(t.unaryFilter.op){case"IS_NAN":var e=$a(t.unaryFilter.field);return Vo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=$a(t.unaryFilter.field);return Vo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$a(t.unaryFilter.field);return Vo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$a(t.unaryFilter.field);return Vo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ji()}}function tu(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function eu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function nu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=iu(e)),e=ru(t.get(n),e);return iu(e)}function ru(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function iu(t){return t+"\x01\x01"}function ou(t){var e=t.length;if(Ui(e>=2),2===e)return Ui("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Xi.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&ji(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:ji()}o=s+2}return new Xi(r)}var su=function(t,e){this.seconds=t,this.nanoseconds=e},au=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};au.store="owner",au.key="owner";var uu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};uu.store="mutationQueues",uu.keyPath="userId";var cu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};cu.store="mutations",cu.keyPath="batchId",cu.userMutationsIndex="userMutationsIndex",cu.userMutationsKeyPath=["userId","batchId"];var lu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,nu(e)]},t.key=function(t,e,n){return[t,nu(e),n]},t}();lu.store="documentMutations",lu.PLACEHOLDER=new lu;var hu=function(t,e){this.path=t,this.readTime=e},fu=function(t,e){this.path=t,this.version=e},du=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};du.store="remoteDocuments",du.readTimeIndex="readTimeIndex",du.readTimeIndexPath="readTime",du.collectionReadTimeIndex="collectionReadTimeIndex",du.collectionReadTimeIndexPath=["parentPath","readTime"];var pu=function(t){this.byteSize=t};pu.store="remoteDocumentGlobal",pu.key="remoteDocumentGlobalKey";var yu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};yu.store="targets",yu.keyPath="targetId",yu.queryTargetsIndexName="queryTargetsIndex",yu.queryTargetsKeyPath=["canonicalId","targetId"];var gu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};gu.store="targetDocuments",gu.keyPath=["targetId","path"],gu.documentTargetsIndex="documentTargetsIndex",gu.documentTargetsKeyPath=["path","targetId"];var mu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};mu.key="targetGlobalKey",mu.store="targetGlobal";var vu=function(t,e){this.collectionId=t,this.parent=e};vu.store="collectionParents",vu.keyPath=["collectionId","parent"];var bu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};bu.store="clientMetadata",bu.keyPath="clientId";var wu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};wu.store="bundles",wu.keyPath="bundleId";var _u=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};_u.store="namedQueries",_u.keyPath="name";var Eu=(0,bt.ev)((0,bt.ev)([],(0,bt.ev)((0,bt.ev)([],(0,bt.ev)((0,bt.ev)([],(0,bt.ev)((0,bt.ev)([],[uu.store,cu.store,lu.store,du.store,yu.store,au.store,mu.store,gu.store]),[bu.store])),[pu.store])),[vu.store])),[wu.store,_u.store]),Tu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Iu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Su=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Au=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&ji(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Cu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Su,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Nu(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Lu(e.target.error);n.ft.reject(new Nu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Nu(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Li("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ou(e)},t}(),xu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,wt.z$)())&&Fi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Li("SimpleDb","Removing database:",t),Ru(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,wt.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,bt.mG)(this,void 0,void 0,function(){var e,n=this;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Li("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Nu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Oi(Di.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Nu(t,n))},i.onupgradeneeded=function(t){Li("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Li("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,bt.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,bt.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,bt.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Cu.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Au.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Li("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ku=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Ru(this.Pt.delete())},t}(),Nu=function(t){function e(e,n){var r=this;return(r=t.call(this,Di.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,bt.ZT)(e,t),e}(Oi);function Du(t){return"IndexedDbTransactionError"===t.name}var Ou=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Li("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Li("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ru(n)},t.prototype.add=function(t){return Li("SimpleDb","ADD",this.store.name,t,t),Ru(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ru(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Li("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Li("SimpleDb","DELETE",this.store.name,t),Ru(this.store.delete(t))},t.prototype.count=function(){return Li("SimpleDb","COUNT",this.store.name),Ru(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Li("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Au(function(n,r){e.onerror=function(t){var e=Lu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Au(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ku(i),s=e(i.primaryKey,i.value,o);if(s instanceof Au){var a=s.catch(function(t){return o.done(),Au.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Au.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ru(t){return new Au(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Lu(t.target.error);n(e)}})}var Pu=!1;function Lu(t){var e=xu._t((0,wt.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Oi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Pu||(Pu=!0,setTimeout(function(){throw r},0)),r}}return t}var Fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,bt.ZT)(e,t),e}(Iu);function Mu(t,e){var n=qi(t);return xu.It(n.Mt,e)}var Vu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Fs(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Ms(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Ms(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ji.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ha())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&zi(this.mutations,t.mutations,function(t,e){return js(t,e)})&&zi(this.baseMutations,t.baseMutations,function(t,e){return js(t,e)})},t}(),ju=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ui(e.mutations.length===r.length);for(var i=ca(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Uu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ji.min()),void 0===o&&(o=Ji.min()),void 0===s&&(s=ro.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),qu=function(t){this.Lt=t};function Bu(t,e){if(e.document)return ja(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=yo.fromSegments(e.noDocument.path),r=Zu(e.noDocument.readTime),i=Oo.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=yo.fromSegments(e.unknownDocument.path);return r=Zu(e.unknownDocument.version),Oo.newUnknownDocument(o,r)}return ji()}function Gu(t,e,n){var r=Hu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Oa(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Aa(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new du(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Ku(e.version);return s=e.hasCommittedMutations,new du(null,new hu(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Ku(e.version);return new du(new fu(c,l),null,null,!0,r,i)}return ji()}function Hu(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zu(t){var e=new Zi(t[0],t[1]);return Ji.fromTimestamp(e)}function Ku(t){var e=t.toTimestamp();return new su(e.seconds,e.nanoseconds)}function Zu(t){var e=new Zi(t.seconds,t.nanoseconds);return Ji.fromTimestamp(e)}function Ju(t,e){for(var n=(e.baseMutations||[]).map(function(e){return qa(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return qa(t.Lt,e)}),o=Zi.fromMillis(e.localWriteTimeMs);return new Vu(e.batchId,o,n,i)}function Qu(t){var e,n,r=Zu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Zu(t.lastLimboFreeSnapshotVersion):Ji.min();return void 0!==t.query.documents?(Ui(1===(n=t.query).documents.length),e=us(es(La(n.documents[0])))):e=function(t){return us(Ha(t))}(t.query),new Uu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ro.fromBase64String(t.resumeToken))}function Wu(t,e){var n,r=Ku(e.snapshotVersion),i=Ku(e.lastLimboFreeSnapshotVersion);n=Mo(e.target)?Ba(t.Lt,e.target):Ga(t.Lt,e.target);var o=e.resumeToken.toBase64();return new yu(e.targetId,Lo(e.target),r,o,e.sequenceNumber,i,n)}function $u(t){var e=Ha({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?cs(e,e.limit,"L"):e}var Yu=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Xu(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Zu(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Xu(t).put({bundleId:(n=e).id,createTime:Ku(ka(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return tc(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:$u(e.bundledQuery),readTime:Zu(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return tc(t).put(function(t){return{name:t.name,readTime:Ku(ka(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Xu(t){return Mu(t,wu.store)}function tc(t){return Mu(t,_u.store)}var ec=function(){function t(){this.Bt=new nc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Au.resolve()},t.prototype.getCollectionParents=function(t,e){return Au.resolve(this.Bt.getEntries(e))},t}(),nc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new na(Xi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new na(Xi.comparator)).toArray()},t}(),rc=function(){function t(){this.qt=new nc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:nu(i)};return ic(t).put(o)}return Au.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ki(e),""],!1,!0);return ic(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ou(o.parent))}return n})},t}();function ic(t){return Mu(t,vu.store)}var oc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ac(t,e,n){var r=t.store(cu.store),i=t.store(lu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Ui(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=lu.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Au.waitFor(o).next(function(){return c})}function uc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ji();e=t.noDocument}return JSON.stringify(e).length}sc.DEFAULT_COLLECTION_PERCENTILE=10,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sc.DEFAULT=new sc(41943040,sc.DEFAULT_COLLECTION_PERCENTILE,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sc.DISABLED=new sc(-1,0,0);var cc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Ui(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hc(t).$t({index:cu.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=fc(t),s=hc(t);return s.add({}).next(function(a){Ui("number"==typeof a);for(var u=new Vu(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Ua(t.Lt,e)}),i=n.mutations.map(function(e){return Ua(t.Lt,e)});return new cu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new na(function(t,e){return Hi(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],y=lu.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,lu.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Au.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return hc(t).get(e).next(function(t){return t?(Ui(t.userId===n.userId),Ju(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Au.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return hc(t).$t({index:cu.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Ui(e.batchId>=r),o=Ju(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hc(t).$t({index:cu.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hc(t).Nt(cu.userMutationsIndex,n).next(function(t){return t.map(function(t){return Ju(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=lu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return fc(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=ou(r[1]);if(a===n.userId&&e.path.isEqual(c))return hc(t).get(u).next(function(t){if(!t)throw ji();Ui(t.userId===n.userId),o.push(Ju(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new na(Hi),i=[];return e.forEach(function(e){var o=lu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=fc(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=ou(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Au.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=lu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new na(Hi);return fc(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=ou(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(hc(t).get(e).next(function(t){if(null===t)throw ji();Ui(t.userId===n.userId),r.push(Ju(n.R,t))}))}),Au.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return ac(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Au.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Au.resolve();var r=IDBKeyRange.lowerBound(lu.prefixForUser(e.userId)),i=[];return fc(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=ou(t[1]);i.push(o)}else r.done()}).next(function(){Ui(0===i.length)})})},t.prototype.containsKey=function(t,e){return lc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return dc(t).get(this.userId).next(function(t){return t||new uu(e.userId,-1,"")})},t}();function lc(t,e,n){var r=lu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fc(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function hc(t){return Mu(t,cu.store)}function fc(t){return Mu(t,lu.store)}function dc(t){return Mu(t,uu.store)}var pc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),yc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new pc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Ji.fromTimestamp(new Zi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return gc(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Ui(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return gc(t).$t(function(s,a){var u=Qu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Au.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return gc(t).$t(function(t,n){var r=Qu(n);e(r)})},t.prototype.Xt=function(t){return mc(t).get(mu.key).next(function(t){return Ui(null!==t),t})},t.prototype.Zt=function(t,e){return mc(t).put(mu.key,e)},t.prototype.te=function(t,e){return gc(t).put(Wu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Lo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return gc(t).$t({range:r,index:yu.queryTargetsIndexName},function(t,n,r){var o=Qu(n);Fo(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=vc(t);return e.forEach(function(e){var s=nu(e.path);i.push(o.put(new gu(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Au.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=vc(t);return Au.forEach(e,function(e){var o=nu(e.path);return Au.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=vc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=vc(t),i=ha();return r.$t({range:n,kt:!0},function(t,e,n){var r=ou(t[1]),o=new yo(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=nu(e.path),r=IDBKeyRange.bound([n],[Ki(n)],!1,!0),i=0;return vc(t).$t({index:gu.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return gc(t).get(e).next(function(t){return t?Qu(t):null})},t}();function gc(t){return Mu(t,yu.store)}function mc(t){return Mu(t,mu.store)}function vc(t){return Mu(t,gu.store)}function bc(t){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){if(t.code!==Di.FAILED_PRECONDITION||t.message!==Tu)throw t;return Li("LocalStore","Unexpectedly lost primary lease"),[2]})})}function wc(t,e){var n=t[1],r=e[1],i=Hi(t[0],e[0]);return 0===i?Hi(n,r):i}var _c=function(){function t(t){this.ne=t,this.buffer=new na(wc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();wc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ec=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Li("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,bt.mG)(e,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Du(e=n.sent())?(Li("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,bc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Tc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Au.resolve(Ni.o);var r=new _c(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Li("LruGarbageCollector","Garbage collection skipped; disabled"),Au.resolve(oc)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Li("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),oc):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Li("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Pi()<=_t.in.DEBUG&&Li("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Au.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Ic=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Tc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Sc(t,n)},t.prototype.removeReference=function(t,e,n){return Sc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Sc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return dc(t).Ot(function(r){return lc(t,r,e).next(function(t){return t&&(n=!0),Au.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),vc(t).delete([0,nu(s.path)])})});i.push(u)}}).next(function(){return Au.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Sc(t,e)},t.prototype.we=function(t,e){var n,r=vc(t),i=Ni.o;return r.$t({index:gu.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ni.o&&e(new yo(ou(n)),i),i=s,n=o):i=Ni.o}).next(function(){i!==Ni.o&&e(new yo(ou(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Sc(t,e){return vc(t).put(function(t,e){return new gu(0,nu(t.path),e)}(e,t.currentSequenceNumber))}var Ac=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Wi(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return $i(this.inner)},t}(),Cc=function(){function t(){this.changes=new Ac(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Ji.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Oo.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Au.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),xc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Dc(t).put(Oc(e),n)},t.prototype.removeEntry=function(t,e){var n=Dc(t),r=Oc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Dc(t).get(Oc(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Dc(t).get(Oc(e)).next(function(t){return{document:n.ye(e,t),size:uc(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=oa();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=oa(),i=new Xs(yo.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,uc(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Au.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Dc(t).$t({range:r},function(t,e,r){for(var s=yo.fromSegments(t);o&&yo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=oa(),o=e.path.length+1,s={};if(n.isEqual(Ji.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Hu(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=du.collectionReadTimeIndex}return Dc(t).$t(s,function(t,n,s){if(t.length===o){var a=Bu(r.R,n);e.path.isPrefixOf(a.key.path)?ds(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new kc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Nc(t).get(pu.key).next(function(t){return Ui(!!t),t})},t.prototype.me=function(t,e){return Nc(t).put(pu.key,e)},t.prototype.ye=function(t,e){if(e){var n=Bu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Ji.min()))return n}return Oo.newInvalidDocument(t)},t}(),kc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Ac(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,bt.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new na(function(t,e){return Hi(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Gu(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=uc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Gu(e.Ie.R,Oo.newNoDocument(o,Ji.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Au.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Cc);function Nc(t){return Mu(t,pu.store)}function Dc(t){return Mu(t,du.store)}function Oc(t){return t.path.toArray()}var Rc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Ui(n<r&&n>=0&&r<=11);var o=new Cu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(au.store)}(t),function(t){t.createObjectStore(uu.store,{keyPath:uu.keyPath}),t.createObjectStore(cu.store,{keyPath:cu.keyPath,autoIncrement:!0}).createIndex(cu.userMutationsIndex,cu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(lu.store)}(t),Pc(t),function(t){t.createObjectStore(du.store)}(t));var s=Au.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(gu.store),t.deleteObjectStore(yu.store),t.deleteObjectStore(mu.store)}(t),Pc(t)),s=s.next(function(){return function(t){var e=t.store(mu.store),n=new mu(0,0,Ji.min().toTimestamp(),0);return e.put(mu.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(cu.store).Nt().next(function(n){t.deleteObjectStore(cu.store),t.createObjectStore(cu.store,{keyPath:cu.keyPath,autoIncrement:!0}).createIndex(cu.userMutationsIndex,cu.userMutationsKeyPath,{unique:!0});var r=e.store(cu.store),i=n.map(function(t){return r.put(t)});return Au.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(bu.store,{keyPath:bu.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(pu.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(du.store);e.createIndex(du.readTimeIndex,du.readTimeIndexPath,{unique:!1}),e.createIndex(du.collectionReadTimeIndex,du.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(wu.store,{keyPath:wu.keyPath})}(t),function(t){t.createObjectStore(_u.store,{keyPath:_u.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(du.store).$t(function(t,n){e+=uc(n)}).next(function(){var n=new pu(e);return t.store(pu.store).put(pu.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(uu.store),r=t.store(cu.store);return n.Nt().next(function(n){return Au.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(cu.userMutationsIndex,i).next(function(r){return Au.forEach(r,function(r){Ui(r.userId===n.userId);var i=Ju(e.R,r);return ac(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(gu.store),n=t.store(du.store);return t.store(mu.store).get(mu.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new Xi(n),s=function(t){return[0,nu(t)]}(o);r.push(e.get(s).next(function(n){return n?Au.resolve():function(n){return e.put(new gu(0,nu(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Au.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(vu.store,{keyPath:vu.keyPath});var n=e.store(vu.store),r=new nc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:nu(i)})}};return e.store(du.store).$t({kt:!0},function(t,e){var n=new Xi(t);return i(n.popLast())}).next(function(){return e.store(lu.store).$t({kt:!0},function(t,e){var n=ou(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(yu.store);return n.$t(function(t,r){var i=Qu(r),o=Wu(e.R,i);return n.put(o)})},t}();function Pc(t){t.createObjectStore(gu.store,{keyPath:gu.keyPath}).createIndex(gu.documentTargetsIndex,gu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(yu.store,{keyPath:yu.keyPath}).createIndex(yu.queryTargetsIndexName,yu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mu.store)}var Lc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fc=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Oi(Di.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ic(this,i),this.Le=n+"main",this.R=new qu(u),this.Be=new xu(this.Le,11,new Rc(this.R)),this.qe=new yc(this.referenceDelegate,this.R),this.Ut=new rc,this.Ue=function(t,e){return new xc(t,e)}(this.R,this.Ut),this.Ke=new Yu,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Fi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Oi(Di.FAILED_PRECONDITION,Lc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Ni(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,bt.mG)(e,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,bt.mG)(e,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,bt.mG)(e,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Vc(e).put(new bu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Du(e))return Li("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Li("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Mc(t).get(au.key).next(function(t){return Au.resolve(e.tn(t))})},t.prototype.en=function(t){return Vc(t).delete(this.clientId)},t.prototype.nn=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Mu(t,bu.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Au.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Au.resolve(!0):Mc(t).get(au.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Oi(Di.FAILED_PRECONDITION,Lc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Vc(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Li("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t=this;return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[au.store,bu.store],function(e){var n=new Fu(e,Ni.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Vc(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return cc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Li("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Eu,function(o){return r=new Fu(o,i.Ne?i.Ne.next():Ni.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Fi("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Oi(Di.FAILED_PRECONDITION,Tu);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Mc(t).get(au.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Oi(Di.FAILED_PRECONDITION,Lc)})},t.prototype.Ze=function(t){var e=new au(this.clientId,this.allowTabSynchronization,Date.now());return Mc(t).put(au.key,e)},t.yt=function(){return xu.yt()},t.prototype.Xe=function(t){var e=this,n=Mc(t);return n.get(au.key).next(function(t){return e.tn(t)?(Li("IndexedDbPersistence","Releasing primary lease."),n.delete(au.key)):Au.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Fi("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,wt.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Li("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Fi("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Fi("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Mc(t){return Mu(t,au.store)}function Vc(t){return Mu(t,bu.store)}function jc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Uc=function(t,e){this.progress=t,this.wn=e},qc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return yo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ss(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new yo(e)).next(function(t){var e=aa();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=aa();return this.Ut.getCollectionParents(t,i).next(function(s){return Au.forEach(s,function(s){var a=function(t,e){return new Xo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Oo.newInvalidDocument(c),r=r.insert(c,l)),Ms(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){ds(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=ha(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Bs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Bc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ha(),i=ha(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Gc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ji.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(ns(e)||rs(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Pi()<=_t.in.DEBUG&&Li("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),fs(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new na(ps(t));return e.forEach(function(e,r){ds(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Pi()<=_t.in.DEBUG&&Li("QueryEngine","Using full collection scan to execute query:",fs(e)),this.Sn.getDocumentsMatchingQuery(t,e,Ji.min())},t}(),Hc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Xs(Hi),this.kn=new Ac(function(t){return Lo(t)},Fo),this.$n=Ji.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new qc(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function zc(t,e,n,r){return new Hc(t,e,n,r)}function Kc(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,bt.Jh)(this,function(s){switch(s.label){case 0:return n=qi(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new qc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=ha(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,g=p.mutations;y<g.length;y++)s=s.add(g[y].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Zc(t,e){var n=qi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Au.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Ui(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Jc(t){var e=qi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Qc(t,e){var n=qi(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ui(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=oa();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Wc(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Ji.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Au.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Wc(t,e,n,r,i){var o=ha();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=oa();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Ji.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Li("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function $c(t,e){var n=qi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Yc(t,e){var n=qi(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Au.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Uu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Xc(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,bt.Jh)(this,function(a){switch(a.label){case 0:r=qi(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Du(s=a.sent()))throw s;return Li("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function tl(t,e,n){var r=qi(t),i=Ji.min(),o=ha();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=qi(t),i=r.kn.get(n);return void 0!==i?Au.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,us(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Ji.min(),n?o:ha())}).next(function(t){return{documents:t,Bn:o}})})}function el(t,e){var n=qi(t),r=qi(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function nl(t){var e=qi(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=qi(t),i=oa(),o=Hu(n),s=Dc(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:du.readTimeIndex,range:a},function(t,e){var n=Bu(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:zu(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function rl(t){return(0,bt.mG)(this,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){return[2,(e=qi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Dc(t),n=Ji.min();return e.$t({index:du.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=zu(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function il(t,e,n,r){return(0,bt.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return(0,bt.Jh)(this,function(p){switch(p.label){case 0:for(i=qi(t),o=ha(),s=oa(),a=ca(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Yc(i,function(t){return us(es(Xi.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Wc(t,f,s,Ji.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function ol(t,e,n){return void 0===n&&(n=ha()),(0,bt.mG)(this,void 0,void 0,function(){var r,i;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return[4,Yc(t,us($u(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=qi(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=ka(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(ro.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var sl=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Au.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:ka(n.createTime)}),Au.resolve()},t.prototype.getNamedQuery=function(t,e){return Au.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:$u(t.bundledQuery),readTime:ka(t.readTime)}}(e)),Au.resolve()},t}(),al=function(){function t(){this.Wn=new na(ul.Gn),this.zn=new na(ul.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ul(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new ul(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new yo(new Xi([])),r=new ul(n,t),i=new ul(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new yo(new Xi([])),n=new ul(e,t),r=new ul(e,t+1),i=ha();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new ul(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ul=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return yo.comparator(t.key,e.key)||Hi(t.ns,e.ns)},t.Hn=function(t,e){return Hi(t.ns,e.ns)||yo.comparator(t.key,e.key)},t}(),cl=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new na(ul.Gn)}return t.prototype.checkEmpty=function(t){return Au.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Vu(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new ul(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Au.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Au.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Au.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Au.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Au.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ul(e,0),i=new ul(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Au.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new na(Hi);return e.forEach(function(t){var e=new ul(t,0),i=new ul(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Au.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;yo.isDocumentKey(i)||(i=i.child(""));var o=new ul(new yo(i),0),s=new na(Hi);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Au.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ui(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Au.forEach(e.mutations,function(i){var o=new ul(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new ul(e,0),r=this.rs.firstAfterOrEqual(n);return Au.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Au.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ll=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Xs(yo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Au.resolve(n?n.document.clone():Oo.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=oa();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Oo.newInvalidDocument(t))}),Au.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=oa(),i=new yo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||ds(e,u)&&(r=r.insert(u.key,u.clone()))}return Au.resolve(r)},t.prototype.fs=function(t,e){return Au.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new hl(this)},t.prototype.getSize=function(t){return Au.resolve(this.size)},t}(),hl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,bt.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Au.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Cc),fl=function(){function t(t){this.persistence=t,this.ds=new Ac(function(t){return Lo(t)},Fo),this.lastRemoteSnapshotVersion=Ji.min(),this.highestTargetId=0,this.ws=0,this._s=new al,this.targetCount=0,this.ys=pc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Au.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Au.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Au.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Au.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Au.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new pc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Au.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Au.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Au.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Au.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Au.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Au.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Au.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Au.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Au.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Au.resolve(n)},t.prototype.containsKey=function(t,e){return Au.resolve(this._s.containsKey(e))},t}(),dl=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ni(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new fl(this),this.Ut=new ec,this.Ue=function(t,e){return new ll(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new qu(e),this.Ke=new sl(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new cl(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Li("MemoryPersistence","Starting transaction:",t);var i=new pl(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Au.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),pl=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,bt.ZT)(e,t),e}(Iu),yl=function(){function t(t){this.persistence=t,this.As=new al,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw ji()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Au.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Au.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Au.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Au.forEach(this.vs,function(r){var i=yo.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Au.or([function(){return Au.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),gl=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function ml(t,e){return"firestore_clients_"+t+"_"+e}function vl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function bl(t,e){return"firestore_targets_"+t+"_"+e}gl.UNAUTHENTICATED=new gl(null),gl.GOOGLE_CREDENTIALS=new gl("google-credentials-uid"),gl.FIRST_PARTY=new gl("first-party-uid");var wl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Oi(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Fi("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),_l=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Oi(i.error.code,i.error.message)),o?new t(e,i.state,r):(Fi("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),El=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=da(),s=0;i&&s<r.activeTargetIds.length;++s)i=po(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Fi("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Tl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Fi("SharedClientState","Failed to parse online state: "+e),null)},t}(),Il=function(){function t(){this.activeTargetIds=da()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Sl=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Xs(Hi),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=ml(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Il),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,bt.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(ml(this.persistenceKey,r)))&&(o=El.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(bl(this.persistenceKey,t));if(n){var r=_l.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(bl(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Li("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Li("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Li("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Li("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Fi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,bt.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,bt.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ni.o;if(null!=t)try{var n=JSON.parse(t);Ui("number"==typeof n),e=n}catch(t){Fi("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ni.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new wl(this.currentUser,t,e,n),i=vl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=vl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=bl(this.persistenceKey,t),i=new _l(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return El.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return wl.Vs(new gl(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return _l.Vs(r,e)},t.prototype.js=function(t){return Tl.Vs(t)},t.prototype.ii=function(t){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Li("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=da();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Al=function(){function t(){this.li=new Il,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Il,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Cl=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),xl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Li("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Li("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),kl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Nl=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Dl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,bt.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new ki;s.listenOnce(Si.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ii.NO_ERROR:var e=s.getResponseJson();Li("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ii.TIMEOUT:Li("Connection",'RPC "'+t+'" timed out'),o(new Oi(Di.DEADLINE_EXCEEDED,"Request time out"));break;case Ii.HTTP_ERROR:var n=s.getStatus();if(Li("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Di).indexOf(e)>=0?e:Di.UNKNOWN}(r.status);o(new Oi(a,r.message))}else o(new Oi(Di.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Oi(Di.UNAVAILABLE,"Connection failed."));break;default:ji()}}finally{Li("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new bi,i=dn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ci({})),this.Fi(o.initMessageHeaders,e),(0,wt.uI)()||(0,wt.b$)()||(0,wt.d)()||(0,wt.w1)()||(0,wt.Mn)()||(0,wt.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Li("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Nl({Ei:function(t){c?Li("Connection","Not sending because WebChannel is closed:",t):(u||(Li("Connection","Opening WebChannel transport."),a.open(),u=!0),Li("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,xi.EventType.OPEN,function(){c||Li("Connection","WebChannel transport opened.")}),h(a,xi.EventType.CLOSE,function(){c||(c=!0,Li("Connection","WebChannel transport closed"),l.Vi())}),h(a,xi.EventType.ERROR,function(t){c||(c=!0,Mi("Connection","WebChannel transport errored:",t),l.Vi(new Oi(Di.UNAVAILABLE,"The operation could not be completed")))}),h(a,xi.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Ui(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Li("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Ks[t];if(void 0!==e)return Ys(e)}(i),s=r.message;void 0===o&&(o=Di.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Oi(o,s)),a.close()}else Li("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Ai.STAT_EVENT,function(t){10===t.stat?Li("Connection","Detected buffering proxy"):11===t.stat&&Li("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Li("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Li("RestConnection","Received: ",t),t},function(e){throw Mi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+kl[t]},t}());function Ol(){return"undefined"!=typeof window?window:null}function Rl(){return"undefined"!=typeof document?document:null}function Pl(t){return new Sa(t,!0)}var Ll=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Li("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Fl=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ll(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Di.RESOURCE_EXHAUSTED?(Fi(e.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Di.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Oi(Di.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,bt.mG)(t,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Li("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Li("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Ml=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,bt.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ji()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Ui(void 0===e||"string"==typeof e),ro.fromBase64String(e||"")):(Ui(void 0===e||e instanceof Uint8Array),ro.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Di.UNKNOWN:Ys(t.code);return new Oi(e,t.message||"")}(a);n=new va(r,i,o,s||null)}else if("documentChange"in e){i=Ra(t,(r=e.documentChange).document.name),o=ka(r.document.updateTime);var a=new No({mapValue:{fields:r.document.fields}}),u=(s=Oo.newFoundDocument(i,o,a),r.targetIds||[]);n=new ga(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Ra(t,(r=e.documentDelete).document),o=r.readTime?ka(r.readTime):Ji.min(),a=Oo.newNoDocument(i,o),n=new ga([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Ra(t,(r=e.documentRemove).document),n=new ga([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return ji();var c=e.filter;i=new Ws(r=c.count||0),n=new ma(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Ji.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ji.min():e.readTime?ka(e.readTime):Ji.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Fa(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Mo(r)?{documents:Ba(t,r)}:{query:Ga(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ca(t,e.resumeToken):e.snapshotVersion.compareTo(Ji.min())>0&&(n.readTime=Aa(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ji()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Fa(this.R),e.removeTarget=t,this.cr(e)},e}(Fl),Vl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,bt.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Ui(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Ui(void 0!==e),t.map(function(t){return function(t,e){var n=ka(t.updateTime?t.updateTime:e);return n.isEqual(Ji.min())&&(n=ka(e)),new Os(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=ka(t.commitTime);return this.listener.Tr(n,e)}return Ui(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Fa(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Ua(e.R,t)})};this.cr(n)},e}(Fl),jl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,bt.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Oi(Di.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Di.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Oi(Di.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Di.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Oi(Di.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Ul=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Fi(e),this.Vr=!1):Li("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),ql=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,bt.mG)(o,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){switch(t.label){case 0:return Wl(this)?(Li("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,bt.mG)(this,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return(e=qi(t)).Or.add(4),[4,Gl(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Bl(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Ul(n,r)};function Bl(t){return(0,bt.mG)(this,void 0,void 0,function(){var e,n;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:if(!Wl(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Gl(t){return(0,bt.mG)(this,void 0,void 0,function(){var e,n;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Hl(t,e){var n=qi(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Ql(n)?Jl(n):hh(n).er()&&Kl(n,e))}function zl(t,e){var n=qi(t),r=hh(n);n.$r.delete(e),r.er()&&Zl(n,e),0===n.$r.size&&(r.er()?r.ir():Wl(n)&&n.Br.set("Unknown"))}function Kl(t,e){t.qr.U(e.targetId),hh(t).mr(e)}function Zl(t,e){t.qr.U(e),hh(t).yr(e)}function Jl(t){t.qr=new wa({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),hh(t).start(),t.Br.Sr()}function Ql(t){return Wl(t)&&!hh(t).tr()&&t.$r.size>0}function Wl(t){return 0===qi(t).Or.size}function $l(t){t.qr=void 0}function Yl(t){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){return t.$r.forEach(function(e,n){Kl(t,e)}),[2]})})}function Xl(t,e){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(n){return $l(t),Ql(t)?(t.Br.Nr(e),Jl(t)):t.Br.set("Unknown"),[2]})})}function th(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i,o;return(0,bt.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof va&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,bt.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Li("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,eh(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ga?t.qr.X(e):e instanceof ma?t.qr.rt(e):t.qr.et(e),n.isEqual(Ji.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Jc(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(ro.EMPTY_BYTE_STRING,n.snapshotVersion)),Zl(t,e);var r=new Uu(n.target,e,1,n.sequenceNumber);Kl(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Li("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,eh(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function eh(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r=this;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:if(!Du(e))throw e;return t.Or.add(1),[4,Gl(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Jc(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,bt.mG)(r,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return Li("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Bl(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function nh(t,e){return e().catch(function(n){return eh(t,n,e)})}function rh(t){return(0,bt.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,bt.Jh)(this,function(s){switch(s.label){case 0:e=qi(t),n=fh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Wl(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,$c(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=fh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,eh(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return ih(e)&&oh(e),[2]}})})}function ih(t){return Wl(t)&&!fh(t).tr()&&t.kr.length>0}function oh(t){fh(t).start()}function sh(t){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){return fh(t).Ar(),[2]})})}function ah(t){return(0,bt.mG)(this,void 0,void 0,function(){var e,n,r;return(0,bt.Jh)(this,function(i){for(e=fh(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function uh(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=ju.from(r,e,n),[4,nh(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,rh(t)];case 2:return o.sent(),[2]}})})}function ch(t,e){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return e&&fh(t).pr?[4,function(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return $s(r=e.code)&&r!==Di.ABORTED?(n=t.kr.shift(),fh(t).sr(),[4,nh(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,rh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ih(t)&&oh(t),[2]}})})}function lh(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:return n=qi(t),e?(n.Or.delete(2),[4,Bl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Gl(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function hh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=qi(t);return r.br(),new Ml(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Yl.bind(null,t),Ri:Xl.bind(null,t),_r:th.bind(null,t)}),t.Mr.push(function(n){return(0,bt.mG)(e,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Ql(t)?Jl(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),$l(t),e.label=3;case 3:return[2]}})})})),t.Ur}function fh(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=qi(t);return r.br(),new Vl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:sh.bind(null,t),Ri:ch.bind(null,t),Ir:ah.bind(null,t),Tr:uh.bind(null,t)}),t.Mr.push(function(n){return(0,bt.mG)(e,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,rh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(Li("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var dh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Su,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oi(Di.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ph(t,e){if(Fi("AsyncQueue",e+": "+t),Du(t))return new Oi(Di.UNAVAILABLE,e+": "+t);throw t}var yh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||yo.comparator(e.key,n.key)}:function(t,e){return yo.comparator(t.key,e.key)},this.keyedMap=aa(),this.sortedSet=new Xs(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),gh=function(){function t(){this.Qr=new Xs(yo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):ji():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),mh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,yh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ls(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),vh=function(){this.Wr=void 0,this.listeners=[]},bh=function(){this.queries=new Ac(function(t){return hs(t)},ls),this.onlineState="Unknown",this.Gr=new Set};function wh(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,bt.Jh)(this,function(c){switch(c.label){case 0:if(n=qi(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new vh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=ph(a,"Initialization of query '"+fs(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Ih(n),[2]}})})}function _h(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,bt.Jh)(this,function(a){return n=qi(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Eh(t,e){for(var n=qi(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Ih(n)}function Th(t,e,n){var r=qi(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Ih(t){t.Gr.forEach(function(t){t.next()})}var Sh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new mh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=mh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Ah=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Ch=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Ra(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?ja(this.R,t.document,!1):Oo.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return ka(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Ch(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||ha()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return[4,il(this.localStore,new Ch(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,ol(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Uc(Object.assign({},this.progress),t))]}})})}}();var xh=function(t){this.key=t},kh=function(t){this.key=t},Nh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ha(),this.mutatedKeys=ha(),this.lo=ps(t),this.fo=new yh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new gh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=ns(this.query)&&i.size===this.query.limit?i.last():null,c=rs(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=ds(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),ns(this.query)||rs(this.query))for(;s.size>this.query.limit;){var l=ns(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ji()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new mh(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new gh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ha(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new kh(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new xh(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ha();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return mh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Dh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Oh=function(t){this.key=t,this.bo=!1},Rh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Ac(function(t){return hs(t)},ls),this.Vo=new Map,this.So=new Set,this.Do=new Xs(yo.comparator),this.Co=new Map,this.No=new al,this.xo={},this.Fo=new Map,this.ko=pc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Ph(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,bt.Jh)(this,function(a){switch(a.label){case 0:return n=lf(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Yc(n.localStore,us(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Lh(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Hl(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Lh(t,e,n,r){return(0,bt.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,bt.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,bt.mG)(this,void 0,void 0,function(){var i,o,s;return(0,bt.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,tl(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Jh(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,tl(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Nh(e,i.Bn),s=o._o(i.documents),a=ya.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Jh(t,n,u.To),c=new Dh(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Fh(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return n=qi(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!ls(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Xc(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),zl(n.remoteStore,r.targetId),Kh(n,r.targetId)}).catch(bc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Kh(n,r.targetId),[4,Xc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Mh(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,bt.Jh)(this,function(a){switch(a.label){case 0:r=hf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=qi(t),i=Zi.now(),o=e.reduce(function(t,e){return t.add(e.key)},ha());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Vs(c,n.get(c.key));null!=l&&s.push(new Bs(c.key,l,Do(l.value.mapValue),Rs.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Xs(Hi)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,$h(r,i.changes)];case 3:return a.sent(),[4,rh(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ph(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Vh(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:n=qi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Qc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Ui(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Ui(r.bo):t.removedDocuments.size>0&&(Ui(r.bo),r.bo=!1))}),[4,$h(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,bc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function jh(t,e,n){var r=qi(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=qi(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Ih(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Uh(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,bt.Jh)(this,function(c){switch(c.label){case 0:return(r=qi(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Xs(yo.comparator)).insert(o,Oo.newNoDocument(o,Ji.min())),a=ha().add(o),u=new pa(Ji.min(),new Map,new na(Hi),s,a),[4,Vh(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Wh(r),[3,4];case 2:return[4,Xc(r.localStore,e,!1).then(function(){return Kh(r,e,n)}).catch(bc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function qh(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:n=qi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Zc(n.localStore,e)];case 2:return i=o.sent(),zh(n,r,null),Hh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,$h(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,bc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Bh(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:r=qi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=qi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Ui(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),zh(r,e,n),Hh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,$h(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,bc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Gh(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,bt.Jh)(this,function(a){switch(a.label){case 0:Wl((n=qi(t)).remoteStore)||Li("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=qi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=ph(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Hh(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function zh(t,e,n){var r=qi(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Kh(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Zh(t,e)})}function Zh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(zl(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Wh(t))}function Jh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof xh?(t.No.addReference(o.key,e),Qh(t,o)):o instanceof kh?(Li("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Zh(t,o.key)):ji()}}function Qh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Li("SyncEngine","New document in limbo: "+n),t.So.add(r),Wh(t))}function Wh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new yo(Xi.fromString(e)),r=t.ko.next();t.Co.set(r,new Oh(n)),t.Do=t.Do.insert(n,r),Hl(t.remoteStore,new Uu(us(es(n.path)),r,2,Ni.o))}}function $h(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,bt.Jh)(this,function(a){switch(a.label){case 0:return r=qi(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Bc.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,bt.Jh)(this,function(l){switch(l.label){case 0:n=qi(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Au.forEach(e,function(e){return Au.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Au.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Du(r=l.sent()))throw r;return Li("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Yh(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return(n=qi(t)).currentUser.isEqual(e)?[3,3]:(Li("SyncEngine","User change. New user:",e.toKey()),[4,Kc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Oi(Di.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,$h(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Xh(t,e){var n=qi(t),r=n.Co.get(e);if(r&&r.bo)return ha().add(r.key);var i=ha(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function tf(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return[4,tl((n=qi(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Jh(n,e.targetId,i.To),i)]}})})}function ef(t){return(0,bt.mG)(this,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){return[2,nl((e=qi(t)).localStore).then(function(t){return $h(e,t)})]})})}function nf(t,e,n,r){return(0,bt.mG)(this,void 0,void 0,function(){var i,o;return(0,bt.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=qi(t),r=qi(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Au.resolve(null)})})}((i=qi(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,rh(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(zh(i,e,r||null),Hh(i,e),function(t,e){qi(qi(t)._n).Gt(e)}(i.localStore,e)):ji(),s.label=4;case 4:return[4,$h(i,o)];case 5:return s.sent(),[3,7];case 6:Li("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function rf(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,bt.Jh)(this,function(c){switch(c.label){case 0:return lf(n=qi(t)),hf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,of(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,lh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Hl(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Kh(n,e),Xc(n.localStore,e,!0)}),zl(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,of(n,a)];case 5:return c.sent(),function(t){var e=qi(t);e.Co.forEach(function(t,n){zl(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Xs(yo.comparator)}(n),n.$o=!1,[4,lh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function of(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return(0,bt.Jh)(this,function(y){switch(y.label){case 0:n=qi(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Yc(n.localStore,us(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,tf(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,el(n.localStore,a)];case 8:return p=y.sent(),[4,Yc(n.localStore,p)];case 9:return u=y.sent(),[4,Lh(n,sf(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function sf(t){return ts(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function af(t){var e=qi(t);return qi(qi(e.localStore).persistence).fn()}function uf(t,e,n,r){return(0,bt.mG)(this,void 0,void 0,function(){var i,o,s;return(0,bt.Jh)(this,function(a){switch(a.label){case 0:return(i=qi(t)).$o?(Li("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,nl(i.localStore)];case 3:return o=a.sent(),s=pa.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,$h(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Xc(i.localStore,e,!0)];case 6:return a.sent(),Kh(i,e,r),[3,8];case 7:ji(),a.label=8;case 8:return[2]}})})}function cf(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,bt.Jh)(this,function(f){switch(f.label){case 0:if(!(r=lf(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Li("SyncEngine","Adding an already active target "+s),[3,5]):[4,el(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Yc(r.localStore,a)];case 3:return u=f.sent(),[4,Lh(r,sf(a),u.targetId,!1)];case 4:f.sent(),Hl(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Xc(r.localStore,t,!1).then(function(){zl(r.remoteStore,t),Kh(r,t)}).catch(bc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function lf(t){var e=qi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uh.bind(null,e),e.vo._r=Eh.bind(null,e.eventManager),e.vo.Mo=Th.bind(null,e.eventManager),e}function hf(t){var e=qi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bh.bind(null,e),e}var ff=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return this.R=Pl(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return zc(this.persistence,new Gc,t.initialUser,this.R)},t.prototype.qo=function(t){return new dl(yl.bs,this.R)},t.prototype.Bo=function(t){return new Al},t.prototype.terminate=function(){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),df=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,bt.ZT)(e,t),e.prototype.initialize=function(e){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,rl(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,hf(this.Qo.syncEngine)];case 4:return n.sent(),[4,rh(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return zc(this.persistence,new Gc,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Ec(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=jc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sc.withCacheSize(this.cacheSizeBytes):sc.DEFAULT;return new Fc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Ol(),Rl(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Al},e}(ff),pf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,bt.ZT)(e,t),e.prototype.initialize=function(e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r=this;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Sl?(this.sharedClientState.syncEngine={ui:nf.bind(null,n),ai:uf.bind(null,n),hi:cf.bind(null,n),fn:af.bind(null,n),ci:ef.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,bt.mG)(r,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return[4,rf(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Ol();if(!Sl.yt(e))throw new Oi(Di.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Sl(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(df),yf=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n=this;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return jh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Yh.bind(null,this.syncEngine),[4,lh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new bh},t.prototype.createDatastore=function(t){var e=Pl(t.databaseInfo.databaseId),n=new Dl(t.databaseInfo);return function(t,e,n){return new jl(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return jh(s.syncEngine,t,0)},o=xl.yt()?new xl:new Cl,new ql(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Rh(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,bt.mG)(this,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return e=qi(t),Li("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Gl(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),gf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),mf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Su,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Ah(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t,e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,bt.mG)(this,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t,e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,bt.mG)(this,void 0,void 0,function(){var e,n=this;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Oi(Di.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,bt.Jh)(this,function(u){switch(u.label){case 0:return n=qi(t),r=Fa(n.R)+"/documents",i={documents:e.map(function(t){return Oa(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Ui(!!e.found);var n=Ra(t,e.found.name),r=ka(e.found.updateTime),i=new No({mapValue:{fields:e.found.fields}});return Oo.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Ui(!!e.missing),Ui(!!e.readTime);var n=Ra(t,e.missing),r=ka(e.readTime);return Oo.newNoDocument(n,r)}(t,e):ji()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Ui(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Js(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t,e=this;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=yo.fromPath(n);e.mutations.push(new Qs(r,e.precondition(r)))}),[4,function(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return n=qi(t),r=Fa(n.R)+"/documents",i={writes:e.map(function(t){return Ua(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ji();e=Ji.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Oi(Di.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Rs.updateTime(e):Rs.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ji.min()))throw new Oi(Di.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rs.updateTime(e)}return Rs.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),vf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ll(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,bt.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,bt.Jh)(this,function(r){return t=new mf(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ho(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!$s(e)}return!1},t}(),bf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=gl.UNAUTHENTICATED,this.clientId=Gi.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,bt.mG)(r,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return Li("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Oi(Di.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Su;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,bt.mG)(t,void 0,void 0,function(){var t,n;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ph(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function wf(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Li("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,bt.mG)(i,void 0,void 0,function(){return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Kc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function _f(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ef(t)];case 1:return n=i.sent(),Li("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,bt.mG)(this,void 0,void 0,function(){var n,r;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return(n=qi(t)).asyncQueue.verifyOperationInProgress(),Li("RemoteStore","RemoteStore received new credentials"),r=Wl(n),n.Or.add(3),[4,Gl(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Bl(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Ef(t){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Li("FirestoreClient","Using default OfflineComponentProvider"),[4,wf(t,new ff)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Tf(t){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Li("FirestoreClient","Using default OnlineComponentProvider"),[4,_f(t,new yf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function If(t){return Ef(t).then(function(t){return t.persistence})}function Sf(t){return Ef(t).then(function(t){return t.localStore})}function Af(t){return Tf(t).then(function(t){return t.remoteStore})}function Cf(t){return Tf(t).then(function(t){return t.syncEngine})}function xf(t){return(0,bt.mG)(this,void 0,void 0,function(){var e,n;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:return[4,Tf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Ph.bind(null,e.syncEngine),n.onUnlisten=Fh.bind(null,e.syncEngine),n)]}})})}function kf(t,e,n){var r=this;void 0===n&&(n={});var i=new Su;return t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(r,void 0,void 0,function(){var r;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new gf({next:function(o){e.enqueueAndForget(function(){return _h(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Oi(Di.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Oi(Di.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Sh(es(n.path),o,{includeMetadataChanges:!0,so:!0});return wh(t,s)},[4,xf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Nf(t,e,n){var r=this;void 0===n&&(n={});var i=new Su;return t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(r,void 0,void 0,function(){var r;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new gf({next:function(n){e.enqueueAndForget(function(){return _h(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Oi(Di.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Sh(n,o,{includeMetadataChanges:!0,so:!0});return wh(t,s)},[4,xf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Df=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Of=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Rf=new Map,Pf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Lf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(gl.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Ff=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Mf=function(){function t(t){var e=this;this.currentUser=gl.UNAUTHENTICATED,this.oc=new Su,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Li("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Li("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Li("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ui("string"==typeof n.accessToken),new Pf(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,bt.mG)(n,void 0,void 0,function(){return(0,bt.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Ui(null===t||"string"==typeof t),new gl(t)},t}(),Vf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=gl.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),jf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Vf(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(gl.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Uf(t,e,n){if(!n)throw new Oi(Di.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function qf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oi(Di.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Bf(t,e,n,r){if(!0===e&&!0===r)throw new Oi(Di.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Gf(t){if(!yo.isDocumentKey(t))throw new Oi(Di.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Hf(t){if(yo.isDocumentKey(t))throw new Oi(Di.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function zf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ji()}function Kf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oi(Di.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=zf(t);throw new Oi(Di.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Zf(t,e){if(e<=0)throw new Oi(Di.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Jf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Oi(Di.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Oi(Di.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Bf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Qf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jf({}),this._settingsFrozen=!1,t instanceof Of?(this._databaseId=t,this._credentials=new Lf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Oi(Di.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Of(t.options.projectId)}(t),this._credentials=new Mf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Oi(Di.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Oi(Di.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Lf;switch(t.type){case"gapi":var e=t.client;return Ui(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new jf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Oi(Di.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Rf.get(this))&&(Li("ComponentProvider","Removing Datastore"),Rf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Wf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Yf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),$f=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Yf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,es(r))||this)._path=r,i.type="collection",i}return(0,bt.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Wf(this.firestore,null,new yo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}($f);function Xf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,wt.m9)(t),Uf("collection","path",e),t instanceof Qf)return Hf(n=Xi.fromString.apply(Xi,(0,bt.ev)([e],r))),new Yf(t,null,n);if(!(t instanceof Wf||t instanceof Yf))throw new Oi(Di.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Hf(n=Xi.fromString.apply(Xi,(0,bt.ev)([t.path],r)).child(Xi.fromString(e))),new Yf(t.firestore,null,n)}function td(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,wt.m9)(t),1===arguments.length&&(e=Gi.u()),Uf("doc","path",e),t instanceof Qf)return Gf(n=Xi.fromString.apply(Xi,(0,bt.ev)([e],r))),new Wf(t,null,new yo(n));if(!(t instanceof Wf||t instanceof Yf))throw new Oi(Di.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Gf(n=t._path.child(Xi.fromString.apply(Xi,(0,bt.ev)([e],r)))),new Wf(t.firestore,t instanceof Yf?t.converter:null,new yo(n))}function ed(t,e){return t=(0,wt.m9)(t),e=(0,wt.m9)(e),(t instanceof Wf||t instanceof Yf)&&(e instanceof Wf||e instanceof Yf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function nd(t,e){return t=(0,wt.m9)(t),e=(0,wt.m9)(e),t instanceof $f&&e instanceof $f&&t.firestore===e.firestore&&ls(t._query,e._query)&&t.converter===e.converter}var rd=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Ll(this,"async_queue_retry"),this.Ic=function(){var e=Rl();e&&Li("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Rl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Rl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new Su;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t,e=this;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Du(t=n.sent()))throw t;return Li("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,Fi("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=dh.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&ji()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,bt.mG)(this,void 0,void 0,function(){var t;return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function id(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Su,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var od=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new rd,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,bt.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||ad(this),this._firestoreClient.terminate()},e}(Qf);function sd(t){return t._firestoreClient||ad(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ad(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Df(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new bf(t._credentials,t._queue,r)}function ud(t,e,n){var r=this,i=new Su;return t.asyncQueue.enqueue(function(){return(0,bt.mG)(r,void 0,void 0,function(){var r;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,wf(t,n)];case 1:return o.sent(),[4,_f(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Di.FAILED_PRECONDITION||t.code===Di.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function cd(t){if(t._initialized||t._terminated)throw new Oi(Di.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ld=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Oi(Di.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new eo(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),hd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ro.fromBase64String(e))}catch(e){throw new Oi(Di.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ro.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),fd=function(t){this._methodName=t},dd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Oi(Di.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Oi(Di.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Hi(this._lat,t._lat)||Hi(this._long,t._long)},t}(),pd=/^__.*__$/,yd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Bs(t,this.data,this.fieldMask,e,this.fieldTransforms):new qs(t,this.data,e,this.fieldTransforms)},t}(),gd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Bs(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function md(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ji()}}var vd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return Vd(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(md(this.Nc)&&pd.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),bd=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Pl(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new vd({Nc:t,methodName:e,qc:n,path:eo.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function wd(t){var e=t._freezeSettings(),n=Pl(t._databaseId);return new bd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _d(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Pd("Data must be an object, but it was:",s,r);var a,u,c=Od(r,s);if(o.merge)a=new no(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Ld(e,f[h],n);if(!s.contains(d))throw new Oi(Di.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");jd(l,d)||l.push(d)}a=new no(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new yd(new No(c),a,u)}var Ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bt.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(fd);function Td(t,e,n){return new vd({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bt.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Ds(t.path,new Ts)},e.prototype.isEqual=function(t){return t instanceof e},e}(fd),Sd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,bt.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Td(this,t,!0),n=this.Kc.map(function(t){return Dd(t,e)}),r=new Is(n);return new Ds(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fd),Ad=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,bt.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Td(this,t,!0),n=this.Kc.map(function(t){return Dd(t,e)}),r=new As(n);return new Ds(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fd),Cd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,bt.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new xs(t.R,vs(t.R,this.Qc));return new Ds(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(fd);function xd(t,e,n,r){var i=t.Uc(1,e,n);Pd("Data must be an object, but it was:",i,r);var o=[],s=No.empty();Wi(r,function(t,r){var a=Md(e,t,n);r=(0,wt.m9)(r);var u=i.Oc(a);if(r instanceof Ed)o.push(a);else{var c=Dd(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new no(o);return new gd(s,a,i.fieldTransforms)}function kd(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Ld(e,r,n)],u=[i];if(o.length%2!=0)throw new Oi(Di.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ld(e,o[c])),u.push(o[c+1]);for(var l=[],h=No.empty(),f=a.length-1;f>=0;--f)if(!jd(l,a[f])){var d=a[f],p=u[f];p=(0,wt.m9)(p);var y=s.Oc(d);if(p instanceof Ed)l.push(d);else{var g=Dd(p,y);null!=g&&(l.push(d),h.set(d,g))}}var m=new no(l);return new gd(h,m,s.fieldTransforms)}function Nd(t,e,n,r){return void 0===r&&(r=!1),Dd(n,t.Uc(r?4:3,e))}function Dd(t,e){if(Rd(t=(0,wt.m9)(t)))return Pd("Unsupported field value:",e,t),Od(t,e);if(t instanceof fd)return function(t,e){if(!md(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Dd(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,wt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vs(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Zi.fromDate(t);return{timestampValue:Aa(e.R,n)}}if(t instanceof Zi)return n=new Zi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Aa(e.R,n)};if(t instanceof dd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hd)return{bytesValue:Ca(e.R,t._byteString)};if(t instanceof Wf){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Na(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+zf(t))}(t,e)}function Od(t,e){var n={};return $i(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(t,function(t,r){var i=Dd(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Rd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Zi||t instanceof dd||t instanceof hd||t instanceof Wf||t instanceof fd)}function Pd(t,e,n){if(!Rd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=zf(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function Ld(t,e,n){if((e=(0,wt.m9)(e))instanceof ld)return e._internalPath;if("string"==typeof e)return Md(t,e);throw Vd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Fd=new RegExp("[~\\*/\\[\\]]");function Md(t,e,n){if(e.search(Fd)>=0)throw Vd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ld.bind.apply(ld,(0,bt.ev)([void 0],e.split(".")))))._internalPath}catch(Vp){throw Vd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Vd(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Oi(Di.INVALID_ARGUMENT,(a+=". ")+t+u)}function jd(t,e){return t.some(function(t){return t.isEqual(e)})}var Ud=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Wf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new qd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Bd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bt.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Ud);function Bd(t,e){return"string"==typeof e?Md(t,e):e instanceof ld?e._internalPath:e._delegate._internalPath}var Gd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Hd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,bt.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Bd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Ud),zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bt.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Hd),Kd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Gd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new zd(n._firestore,n._userDataWriter,r.key,r,new Gd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Oi(Di.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new zd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Gd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new zd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Gd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Zd(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Zd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ji()}}function Jd(t,e){return t instanceof Hd&&e instanceof Hd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Kd&&e instanceof Kd&&t._firestore===e._firestore&&nd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Qd(t){if(rs(t)&&0===t.explicitOrderBy.length)throw new Oi(Di.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wd=function(){};function $d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Yd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,bt.ZT)(e,t),e.prototype._apply=function(t){var e=wd(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Oi(Di.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){op(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(ip(r,t,l[c]));a={arrayValue:{values:u}}}else a=ip(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||op(s,o),a=Nd(n,"where",s,"in"===o||"not-in"===o);var h=Vo.create(i,o,a);return function(t,e){if(e.g()){var n=os(t);if(null!==n&&!n.isEqual(e.field))throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=is(t);null!==r&&sp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Oi(Di.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new $f(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Wd),Xd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,bt.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Qo(e,n);return function(t,e){if(null===is(t)){var n=os(t);null!==n&&sp(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new $f(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Xo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Wd),tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,bt.ZT)(e,t),e.prototype._apply=function(t){return new $f(t.firestore,t.converter,cs(t._query,this.Hc,this.Jc))},e}(Wd),ep=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,bt.ZT)(e,t),e.prototype._apply=function(t){var e=rp(t,this.type,this.Yc,this.Xc);return new $f(t.firestore,t.converter,function(t,e){return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Wd),np=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,bt.ZT)(e,t),e.prototype._apply=function(t){var e=rp(t,this.type,this.Yc,this.Xc);return new $f(t.firestore,t.converter,function(t,e){return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Wd);function rp(t,e,n,r){if(n[0]=(0,wt.m9)(n[0]),n[0]instanceof Ud)return function(t,e,n,r,i){if(!r)throw new Oi(Di.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=as(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(To(e,r.key));else{var c=r.data.field(u.field);if(uo(c))throw new Oi(Di.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Zo(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=wd(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Oi(Di.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ss(t)&&-1!==c.indexOf("/"))throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Xi.fromString(c));if(!yo.isDocumentKey(l))throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new yo(l);a.push(To(e,h))}else{var f=Nd(n,r,c);a.push(f)}}return new Zo(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ip(t,e,n){if("string"==typeof(n=(0,wt.m9)(n))){if(""===n)throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ss(e)&&-1!==n.indexOf("/"))throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Xi.fromString(n));if(!yo.isDocumentKey(r))throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return To(t,new yo(r))}if(n instanceof Wf)return To(t,n._key);throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+zf(n)+".")}function op(t,e){if(!Array.isArray(t)||0===t.length)throw new Oi(Di.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Oi(Di.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function sp(t,e,n){if(!n.isEqual(e))throw new Oi(Di.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var ap=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),go(t)){case 0:return null;case 1:return t.booleanValue;case 2:return so(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ao(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ji()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Wi(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new dd(so(t.latitude),so(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=co(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(lo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=oo(t);return new Zi(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Xi.fromString(t);Ui(eu(n));var r=new Of(n.get(1),n.get(3)),i=new yo(n.popFirst(5));return r.isEqual(e)||Fi("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function up(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var cp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,bt.ZT)(e,t),e.prototype.convertBytes=function(t){return new hd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wf(this.firestore,null,e)},e}(ap),lp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=wd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=hp(t,this._firestore),i=up(r.converter,e,n),o=_d(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Rs.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=hp(t,this._firestore);return o="string"==typeof(e=(0,wt.m9)(e))||e instanceof ld?kd(this._dataReader,"WriteBatch.update",s._key,e,n,r):xd(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Rs.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=hp(t,this._firestore);return this._mutations=this._mutations.concat(new Js(e._key,Rs.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Oi(Di.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function hp(t,e){if((t=(0,wt.m9)(t)).firestore!==e)throw new Oi(Di.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,bt.ZT)(e,t),e.prototype.convertBytes=function(t){return new hd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wf(this.firestore,null,e)},e}(ap);function dp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Kf(t,Wf);var o=Kf(t.firestore,od),s=wd(o);return yp(o,[("string"==typeof(e=(0,wt.m9)(e))||e instanceof ld?kd(s,"updateDoc",t._key,e,n,r):xd(s,"updateDoc",t._key,e)).toMutation(t._key,Rs.exists(!0))])}function pp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,wt.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||id(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(id(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Wf)c=Kf(t.firestore,od),l=es(t._key.path),u={next:function(e){i[a]&&i[a](gp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Kf(t,$f);c=Kf(d.firestore,od),l=d._query;var p=new fp(c);u={next:function(t){i[a]&&i[a](new Kd(c,p,d,t))},error:i[a+1],complete:i[a+2]},Qd(t._query)}return function(t,e,n,r){var i=this,o=new gf(r),s=new Sh(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(i,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return e=wh,[4,xf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(i,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return e=_h,[4,xf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(sd(c),l,h,u)}function yp(t,e){return function(t,e){var n=this,r=new Su;return t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(n,void 0,void 0,function(){var n;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return n=Mh,[4,Cf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(sd(t),e)}function gp(t,e,n){var r=n.docs.get(e._key),i=new fp(t);return new Hd(t,i,e._key,r,new Gd(n.hasPendingWrites,n.fromCache),e.converter)}var mp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,bt.ZT)(e,t),e.prototype.get=function(e){var n=this,r=hp(e,this._firestore),i=new fp(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Hd(n._firestore,i,r._key,t._document,new Gd(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=wd(t)}return t.prototype.get=function(t){var e=this,n=hp(t,this._firestore),r=new cp(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return ji();var i=t[0];if(i.isFoundDocument())return new Ud(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Ud(e._firestore,r,n._key,null,n.converter);throw ji()})},t.prototype.set=function(t,e,n){var r=hp(t,this._firestore),i=up(r.converter,e,n),o=_d(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=hp(t,this._firestore);return o="string"==typeof(e=(0,wt.m9)(e))||e instanceof ld?kd(this._dataReader,"Transaction.update",s._key,e,n,r):xd(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=hp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function vp(){if("undefined"==typeof Uint8Array)throw new Oi(Di.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function bp(){if("undefined"==typeof atob)throw new Oi(Di.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var wp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return bp(),new t(hd.fromBase64String(e))},t.fromUint8Array=function(e){return vp(),new t(hd.fromUint8Array(e))},t.prototype.toBase64=function(){return bp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return vp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),_p=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){cd(t=Kf(t,od));var n=sd(t),r=t._freezeSettings(),i=new yf;return ud(n,i,new df(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){cd(t=Kf(t,od));var e=sd(t),n=t._freezeSettings(),r=new yf;return ud(e,r,new pf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Oi(Di.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Su;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,bt.mG)(e,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,bt.mG)(this,void 0,void 0,function(){return(0,bt.Jh)(this,function(e){switch(e.label){case 0:return xu.yt()?[4,xu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(jc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Ep=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Of||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Kf(t,Qf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Mi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,wt.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Oi(Di.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Ff(new Pf(o,new gl(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,bt.mG)(e,void 0,void 0,function(){var e,n;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:return[4,If(t)];case 1:return e=r.sent(),[4,Af(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=qi(t);return e.Or.delete(0),Bl(e)}(n))]}})})})}(sd(Kf(this._delegate,od)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,bt.mG)(e,void 0,void 0,function(){var e,n;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:return[4,If(t)];case 1:return e=r.sent(),[4,Af(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,bt.mG)(this,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return(e=qi(t)).Or.add(0),[4,Gl(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(sd(Kf(this._delegate,od)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Bf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Su;return t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(e,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(r){switch(r.label){case 0:return e=Gh,[4,Cf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(sd(Kf(this._delegate,od)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new gf(e);return t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(n,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){qi(t).Gr.add(e),e.next()},[4,xf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(n,void 0,void 0,function(){var e;return(0,bt.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){qi(t).Gr.delete(e)},[4,xf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(sd(t=Kf(t,od)),id(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Oi(Di.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Fp(this,Xf(this._delegate,t))}catch(t){throw xp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Cp(this,td(this._delegate,t))}catch(t){throw xp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Rp(this,function(t,e){if(t=Kf(t,Qf),Uf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oi(Di.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new $f(t,null,function(t){return new Xo(Xi.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw xp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Su;return t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(n,void 0,void 0,function(){var n;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Tf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new vf(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(sd(t),function(n){return e(new mp(t,n))})}(this._delegate,function(n){return t(new Ip(e,n))})},t.prototype.batch=function(){var t=this;return sd(this._delegate),new Sp(new lp(this._delegate,function(e){return yp(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Oi(Di.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Oi(Di.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Tp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,bt.ZT)(e,t),e.prototype.convertBytes=function(t){return new wp(new hd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Cp.eu(e,this.firestore,null)},e}(ap),Ip=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Tp(t)}return t.prototype.get=function(t){var e=this,n=Mp(t);return this._delegate.get(n).then(function(t){return new Dp(e._firestore,new Hd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Mp(t);return n?(qf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Mp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,bt.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Mp(t);return this._delegate.delete(e),this},t}(),Sp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Mp(t);return n?(qf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Mp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,bt.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Mp(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Ap=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new zd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Op(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Tp(e),n),i.set(n,o)),o},t}();Ap.su=new WeakMap;var Cp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Tp(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Oi(Di.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Wf(n._delegate,r,new yo(e)))},t.eu=function(e,n,r){return new t(n,new Wf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Fp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Fp(this.firestore,Xf(this._delegate,t))}catch(t){throw xp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,wt.m9)(t))instanceof Wf&&ed(this._delegate,t)},t.prototype.set=function(t,e){e=qf("DocumentReference.set",e);try{return function(t,e,n){t=Kf(t,Wf);var r=Kf(t.firestore,od),i=up(t.converter,e,n);return yp(r,[_d(wd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Rs.none())])}(this._delegate,t,e)}catch(t){throw xp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?dp(this._delegate,t):dp.apply(void 0,(0,bt.ev)([this._delegate,t,e],n))}catch(t){throw xp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return yp(Kf((t=this._delegate).firestore,od),[new Js(t._key,Rs.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=kp(e),i=Np(e,function(e){return new Dp(t.firestore,new Hd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return pp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Kf(t,Wf);var e=Kf(t.firestore,od),n=sd(e),r=new fp(e);return function(t,e){var n=this,r=new Su;return t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(n,void 0,void 0,function(){var n;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i;return(0,bt.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=qi(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Oi(Di.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ph(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Sf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Hd(e,r,t._key,n,new Gd(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Kf(t,Wf);var e=Kf(t.firestore,od);return kf(sd(e),t._key,{source:"server"}).then(function(n){return gp(e,t,n)})}(this._delegate):function(t){t=Kf(t,Wf);var e=Kf(t.firestore,od);return kf(sd(e),t._key).then(function(n){return gp(e,t,n)})}(this._delegate)).then(function(t){return new Dp(e.firestore,new Hd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Ap.nu(this.firestore,e):null))},t}();function xp(t,e,n){return t.message=t.message.replace(e,n),t}function kp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!id(r))return r}return{}}function Np(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=id(t[0])?t[0]:id(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Dp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Cp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Jd(this._delegate,t._delegate)},t}(),Op=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bt.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Dp),Rp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Tp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,$d(this._delegate,function(t,e,n){var r=e,i=Bd("where",t);return new Yd(i,r,n)}(e,n,r)))}catch(e){throw xp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,$d(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Bd("orderBy",t);return new Xd(r,n)}(e,n)))}catch(e){throw xp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,$d(this._delegate,function(t){return Zf("limit",t),new tp("limit",t,"F")}(e)))}catch(e){throw xp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,$d(this._delegate,function(t){return Zf("limitToLast",t),new tp("limitToLast",t,"L")}(e)))}catch(e){throw xp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$d(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ep("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw xp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$d(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ep("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw xp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$d(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new np("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw xp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,$d(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new np("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw xp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return nd(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Kf(t,$f);var e=Kf(t.firestore,od),n=sd(e),r=new fp(e);return function(t,e){var n=this,r=new Su;return t.asyncQueue.enqueueAndForget(function(){return(0,bt.mG)(n,void 0,void 0,function(){var n;return(0,bt.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,bt.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,bt.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,tl(t,e,!0)];case 1:return a=u.sent(),r=new Nh(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ph(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Sf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Kd(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Kf(t,$f);var e=Kf(t.firestore,od),n=sd(e),r=new fp(e);return Nf(n,t._query,{source:"server"}).then(function(n){return new Kd(e,r,t,n)})}(this._delegate):function(t){t=Kf(t,$f);var e=Kf(t.firestore,od),n=sd(e),r=new fp(e);return Qd(t._query),Nf(n,t._query).then(function(n){return new Kd(e,r,t,n)})}(this._delegate)).then(function(t){return new Lp(e.firestore,new Kd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=kp(e),i=Np(e,function(e){return new Lp(t.firestore,new Kd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return pp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Ap.nu(this.firestore,e):null))},t}(),Pp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Op(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Lp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Rp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Op(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Pp(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Op(n._firestore,r))})},t.prototype.isEqual=function(t){return Jd(this._delegate,t._delegate)},t}(),Fp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,bt.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Cp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Cp(this.firestore,void 0===t?td(this._delegate):td(this._delegate,t))}catch(t){throw xp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Kf(t.firestore,od),r=td(t),i=up(t.converter,e);return yp(n,[_d(wd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Rs.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Cp(e.firestore,t)})},e.prototype.isEqual=function(t){return ed(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Ap.nu(this.firestore,t):null))},e}(Rp);function Mp(t){return Kf(t,Wf)}var Vp,jp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(ld.bind.apply(ld,(0,bt.ev)([void 0],t)))}return t.documentId=function(){return new t(eo.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,wt.m9)(t))instanceof ld&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Up=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Id("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ed("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sd("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ad("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Cd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),qp=n(34),Bp={Firestore:Ep,GeoPoint:dd,Timestamp:Zi,Blob:wp,Transaction:Ip,WriteBatch:Sp,DocumentReference:Cp,DocumentSnapshot:Dp,Query:Rp,QueryDocumentSnapshot:Op,QuerySnapshot:Lp,CollectionReference:Fp,FieldPath:jp,FieldValue:Up,setLogLevel:function(t){Ri.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new qp.wA("firestore",function(t){return function(t,e){return new Ep(t,new od(t,e),new _p)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Bp)))})(Vp=vt.Z),Vp.registerVersion("@firebase/firestore","2.3.9"),n(765),n(682),n(345),n(771),n(319),n(971),n(858),Object.create(Error.prototype),Object.create(Error.prototype),n(193),n(487),n(101);const Gp=new r.OlP("angularfire2.auth.use-emulator");function Hp(t,e){return function(t,e=Q.z){return new W.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function zp(t,e){return Hp(t,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function Kp(t,e){return zp(t,e).pipe(nt(void 0),it(),(0,at.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Zp(t,e,n){return Kp(t,n).pipe(ut((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Jp(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Jp(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Jp(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new ht(void 0,void 0)),(0,at.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function Jp(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Qp(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Wp{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Kp(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,at.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(nt(void 0),it(),dt(([t,e])=>e.length>0||!t),(0,at.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ut((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Qp(t);return Zp(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return zp(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,$.D)(this.query.get(t)).pipe((0,gt.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new $p(this.ref.doc(t),this.afs)}}class $p{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=ry(n,e);return new Wp(r,i,this.afs)}snapshotChanges(){return Hp(this.ref,this.afs.schedulers.outsideAngular).pipe(nt(void 0),it(),(0,at.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,at.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,$.D)(this.ref.get(t)).pipe((0,gt.QV)(this.afs.schedulers.insideAngular))}}class Yp{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Kp(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),dt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Kp(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ut((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Qp(t);return Zp(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return zp(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,$.D)(this.query.get(t)).pipe((0,gt.QV)(this.afs.schedulers.insideAngular))}}const Xp=new r.OlP("angularfire2.enableFirestorePersistence"),ty=new r.OlP("angularfire2.firestore.persistenceSettings"),ey=new r.OlP("angularfire2.firestore.settings"),ny=new r.OlP("angularfire2.firestore.use-emulator");function ry(t,e=(t=>t)){return{query:e(t),ref:t}}let iy=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new J.HU(o),this.keepUnstableUntilFirst=(0,J.ss)(this.schedulers);const c=(0,J.on)(t,o,e);!mt.Z.auth&&u&&(0,J.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,J.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return(0,$.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Vp){return"undefined"!=typeof console&&console.warn(Vp),(0,Y.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,Y.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=ry(n,e),o=this.schedulers.ngZone.run(()=>r);return new Wp(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Yp(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new $p(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(J.Dh),r.LFG(J.xv,8),r.LFG(Xp,8),r.LFG(ey,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ty,8),r.LFG(ny,8),r.LFG(Gp,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(J.Dh),r.LFG(J.xv,8),r.LFG(Xp,8),r.LFG(ey,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ty,8),r.LFG(ny,8),r.LFG(Gp,8))},token:t,providedIn:"any"}),t})(),oy=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Xp,useValue:!0},{provide:ty,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[iy]}),t})();function sy(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",3),r.TgZ(1,"button",4),r.NdJ("click",function(){r.CHM(t);const e=r.oxw().$implicit;return r.oxw().approve(e.payload.doc.id)}),r._uU(2,"Approve"),r.qZA(),r.TgZ(3,"button",4),r.NdJ("click",function(){r.CHM(t);const e=r.oxw().$implicit;return r.oxw().decline(e.payload.doc.id)}),r._uU(4,"Decline"),r.qZA(),r.qZA()}}function ay(t,e){1&t&&(r.TgZ(0,"p"),r._uU(1,"Already Approved"),r.qZA())}function uy(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.qZA(),r.TgZ(11,"td"),r._uU(12),r.qZA(),r.TgZ(13,"td"),r.YNc(14,sy,5,0,"div",1),r.YNc(15,ay,2,0,"p",2),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Oqu(t.payload.doc.data().name),r.xp6(2),r.Oqu(t.payload.doc.data().email),r.xp6(2),r.Oqu(t.payload.doc.data().institution),r.xp6(2),r.Oqu(t.payload.doc.data().number),r.xp6(2),r.Oqu(t.payload.doc.data().pmethod),r.xp6(2),r.Oqu(t.payload.doc.data().trx),r.xp6(1),r.ekj("nonapproved",!t.payload.doc.data().approved),r.xp6(1),r.Q6J("ngIf",!t.payload.doc.data().approved),r.xp6(1),r.Q6J("ngIf",t.payload.doc.data().approved)}}let cy=(()=>{class t{constructor(t){this.db=t,t.collection("waitingForApprovement").snapshotChanges().subscribe(t=>this.data=t)}approve(t){this.db.collection("waitingForApprovement").doc(t).update({approved:!0})}decline(t){this.db.collection("waitingForApprovement").doc(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(iy))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:17,vars:1,consts:[[4,"ngFor","ngForOf"],["class","button",4,"ngIf"],[4,"ngIf"],[1,"button"],[3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"table"),r.TgZ(1,"tr"),r.TgZ(2,"th"),r._uU(3,"Name"),r.qZA(),r.TgZ(4,"th"),r._uU(5,"Email"),r.qZA(),r.TgZ(6,"th"),r._uU(7,"Institution"),r.qZA(),r.TgZ(8,"th"),r._uU(9,"bKash Number"),r.qZA(),r.TgZ(10,"th"),r._uU(11,"Payment Method"),r.qZA(),r.TgZ(12,"th"),r._uU(13,"Transaction ID(Case Sensitive)"),r.qZA(),r.TgZ(14,"th"),r._uU(15,"Approval"),r.qZA(),r.qZA(),r.YNc(16,uy,16,10,"tr",0),r.qZA()),2&t&&(r.xp6(16),r.Q6J("ngForOf",e.data))},directives:[f,p],styles:["table[_ngcontent-%COMP%]{width:200%;background:#182a30;color:#54defe}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:15px;text-align:center;border:1px solid #54defe}td[_ngcontent-%COMP%]:first-child, th[_ngcontent-%COMP%]:first-child{width:15%}td[_ngcontent-%COMP%]:nth-child(2), th[_ngcontent-%COMP%]:nth-child(2){width:18%}td[_ngcontent-%COMP%]:nth-child(3), th[_ngcontent-%COMP%]:nth-child(3){width:25%}td[_ngcontent-%COMP%]:nth-child(4), td[_ngcontent-%COMP%]:nth-child(5), th[_ngcontent-%COMP%]:nth-child(4), th[_ngcontent-%COMP%]:nth-child(5){width:10%}td[_ngcontent-%COMP%]:nth-child(6), th[_ngcontent-%COMP%]:nth-child(6){width:20%}td[_ngcontent-%COMP%]:nth-child(7), th[_ngcontent-%COMP%]:nth-child(7){width:25%}td.nonapproved[_ngcontent-%COMP%]{padding:8px}button[_ngcontent-%COMP%]{color:#182a30;border-radius:5px;background:#54defe;padding:10px 20px;text-align:center;font-weight:700;font-family:PT Sans,sans-serif;-webkit-user-select:none;user-select:none;outline:none;border:none;cursor:pointer;transition:.2s;margin-right:10px}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #54defe,0 0 13px #54defe,0 0 26px #54defe}button[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:default}button[_ngcontent-%COMP%]:disabled:hover{box-shadow:none}"]}),t})();const ly={apiKey:"AIzaSyBR36piXKbbiot9fL4YdH6s1ge3ewnXyt0",authDomain:"sulphur-shop.firebaseapp.com",projectId:"sulphur-shop",storageBucket:"sulphur-shop.appspot.com",messagingSenderId:"333335396754",appId:"1:333335396754:web:15540c122cbcf82fc1414b"};let hy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[cy]}),t.\u0275inj=r.cJS({providers:[],imports:[[Z,J.hO.initializeApp(ly),oy]]}),t})();(0,r.G48)(),z().bootstrapModule(hy).catch(t=>console.error(t))},762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=315)}]);
